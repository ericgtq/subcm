export const config = { compatibility_date: "2025-09-01" };
const _b64 = "KGZ1bmN0aW9uKCl7CiJ1c2Ugc3RyaWN0IjsKbGV0IOW/q+mAn+iuoumYheiuv+mXruWFpeWPoyA9IFsnYXV0byddOwpsZXQgYWRkcmVzc2VzID0gW107CmxldCBhZGRyZXNzZXNhcGkgPSBbXTsKCmxldCBhZGRyZXNzZXNub3RscyA9IFtdOwpsZXQgYWRkcmVzc2Vzbm90bHNhcGkgPSBbXTsKCmxldCBhZGRyZXNzZXNjc3YgPSBbXTsKbGV0IERMUyA9IDc7CmxldCByZW1hcmtJbmRleCA9IDE7Ly9DU1blpIfms6jmiYDlnKjliJflgY/np7vph48KCmxldCBzdWJDb252ZXJ0ZXIgPSAnU1VCQVBJLmNtbGl1c3Nzcy5uZXQnOwpsZXQgc3ViQ29uZmlnID0gYXRvYignYUhSMGNITTZMeTl5WVhjdVoybDBhSFZpZFhObGNtTnZiblJsYm5RdVkyOXRMMk50YkdsMUwwRkRURFJUVTFJdmJXRnBiaTlEYkdGemFDOWpiMjVtYVdjdlFVTk1ORk5UVWw5UGJteHBibVZmUm5Wc2JGOU5kV3gwYVUxdlpHVXVhVzVwJyk7CmxldCBzdWJQcm90b2NvbCA9ICdodHRwcyc7CmxldCBub1RMUyA9ICdmYWxzZSc7CmxldCBsaW5rOwpsZXQg6Zqn6YGT54mI5pys5L2c6ICFID0gYXRvYignWldRPScpOwpsZXQg6I635Y+W5Luj55CGSVA7CmxldCBwcm94eUlQcyA9IFsKCWF0b2IoJ2NISnZlSGxwY0M1bWVIaHJMbVJsWkhsdUxtbHYnKSwKXTsKbGV0IOWMuemFjVBST1hZSVAgPSBbXTsKbGV0IHNvY2tzNURhdGFVUkwgPSAnJzsKbGV0IEJvdFRva2VuID0gJyc7CmxldCBDaGF0SUQgPSAnJzsKbGV0IOS4tOaXtuS4rei9rOWfn+WQjSA9IFtdOwpsZXQg5Li05pe25Lit6L2s5Z+f5ZCN5o6l5Y+jID0gJyc7CmxldCBFbmRQUyA9ICcnOwpsZXQg5Y2P6K6u57G75Z6LID0gYXRvYihgXHUwMDU2XHUwMDZiXHUwMDc4XHUwMDQ2XHUwMDU1XHUwMDMxXHUwMDRkXHUwMDNkYCk7CmxldCBGaWxlTmFtZSA9ICfkvJjpgInorqLpmIXnlJ/miJDlmagnOwpsZXQgU1VCVXBkYXRlVGltZSA9IDY7CmxldCB0b3RhbCA9IDI0OwpsZXQgdGltZXN0YW1wID0gNDEwMjMyOTYwMDAwMDsKY29uc3QgcmVnZXggPSAvXihcZHsxLDN9XC5cZHsxLDN9XC5cZHsxLDN9XC5cZHsxLDN9fFxbLipcXSk6PyhcZCspPyM/KC4qKT8kLzsKbGV0IGZha2VVc2VySUQ7CmxldCBmYWtlSG9zdE5hbWU7CmxldCBodHRwc1BvcnRzID0gWyIyMDUzIiwgIjIwODMiLCAiMjA4NyIsICIyMDk2IiwgIjg0NDMiXTsKbGV0IOacieaViOaXtumXtCA9IDc7CmxldCDmm7TmlrDml7bpl7QgPSAzOwpsZXQgTWFtYUp1c3RLaWxsZWRBTWFuID0gWyd0ZWxlZ3JhbScsICd0d2l0dGVyJywgJ21pYW9rbyddOwpsZXQgcHJveHlJUFBvb2wgPSBbXTsKbGV0IHNvY2tzNURhdGE7CmxldCBhbHBuID0gJ2gzJzsKbGV0IOe9kee7nOWkh+ahiCA9IGA8YSBocmVmPSdodHRwczovL3QubWUvQ01MaXVzc3NzJz7okIxJQ1DlpIctMjAyNDA3MDflj7c8L2E+YDsvL+WGmeS9oOiHquW3seeahOe7tOaKpOiAheW5v+WRigpsZXQg6aKd5aSWSUQgPSAnMCc7CmxldCDliqDlr4bmlrnlvI8gPSAnYXV0byc7CmxldCDnvZHnq5nlm77moIcsIOe9keermeWktOWDjywg572R56uZ6IOM5pmvLCB4aHR0cCA9ICcnOwphc3luYyBmdW5jdGlvbiDmlbTnkIbkvJjpgInliJfooagoYXBpKSB7CglpZiAoIWFwaSB8fCBhcGkubGVuZ3RoID09PSAwKSByZXR1cm4gW107CgoJbGV0IG5ld2FwaSA9ICIiOwoKCS8vIOWIm+W7uuS4gOS4qkFib3J0Q29udHJvbGxlcuWvueixoe+8jOeUqOS6juaOp+WItmZldGNo6K+35rGC55qE5Y+W5raICgljb25zdCBjb250cm9sbGVyID0gbmV3IEFib3J0Q29udHJvbGxlcigpOwoKCWNvbnN0IHRpbWVvdXQgPSBzZXRUaW1lb3V0KCgpID0+IHsKCQljb250cm9sbGVyLmFib3J0KCk7IC8vIOWPlua2iOaJgOacieivt+axggoJfSwgMjAwMCk7IC8vIDLnp5LlkI7op6blj5EKCgl0cnkgewoJCS8vIOS9v+eUqFByb21pc2UuYWxsU2V0dGxlZOetieW+heaJgOaciUFQSeivt+axguWujOaIkO+8jOaXoOiuuuaIkOWKn+aIluWksei0pQoJCS8vIOWvuWFwaeaVsOe7hOi/m+ihjOmBjeWOhu+8jOWvueavj+S4qkFQSeWcsOWdgOWPkei1t2ZldGNo6K+35rGCCgkJY29uc3QgcmVzcG9uc2VzID0gYXdhaXQgUHJvbWlzZS5hbGxTZXR0bGVkKGFwaS5tYXAoYXBpVXJsID0+IGZldGNoKGFwaVVybCwgewoJCQltZXRob2Q6ICdnZXQnLAoJCQloZWFkZXJzOiB7CgkJCQknQWNjZXB0JzogJ3RleHQvaHRtbCxhcHBsaWNhdGlvbi94aHRtbCt4bWwsYXBwbGljYXRpb24veG1sOycsCgkJCQknVXNlci1BZ2VudCc6IEZpbGVOYW1lICsgYXRvYignSUdOdGJHbDFMMWR2Y210bGNsWnNaWE56TW5OMVlnPT0nKQoJCQl9LAoJCQlzaWduYWw6IGNvbnRyb2xsZXIuc2lnbmFsIC8vIOWwhkFib3J0Q29udHJvbGxlcueahOS/oeWPt+mHj+a3u+WKoOWIsGZldGNo6K+35rGC5Lit77yM5Lul5L6/5LqO6ZyA6KaB5pe25Y+v5Lul5Y+W5raI6K+35rGCCgkJfSkudGhlbihyZXNwb25zZSA9PiByZXNwb25zZS5vayA/IHJlc3BvbnNlLnRleHQoKSA6IFByb21pc2UucmVqZWN0KCkpKSk7CgoJCS8vIOmBjeWOhuaJgOacieWTjeW6lAoJCWZvciAoY29uc3QgW2luZGV4LCByZXNwb25zZV0gb2YgcmVzcG9uc2VzLmVudHJpZXMoKSkgewoJCQkvLyDmo4Dmn6Xlk43lupTnirbmgIHmmK/lkKbkuLonZnVsZmlsbGVkJ++8jOWNs+ivt+axguaIkOWKn+WujOaIkAoJCQlpZiAocmVzcG9uc2Uuc3RhdHVzID09PSAnZnVsZmlsbGVkJykgewoJCQkJLy8g6I635Y+W5ZON5bqU55qE5YaF5a65CgkJCQljb25zdCBjb250ZW50ID0gYXdhaXQgcmVzcG9uc2UudmFsdWU7CgoJCQkJY29uc3QgbGluZXMgPSBjb250ZW50LnNwbGl0KC9ccj9cbi8pOwoJCQkJbGV0IOiKgueCueWkh+azqCA9ICcnOwoJCQkJbGV0IOa1i+mAn+err+WPoyA9ICc0NDMnOwoKCQkJCWlmIChsaW5lc1swXS5zcGxpdCgnLCcpLmxlbmd0aCA+IDMpIHsKCQkJCQljb25zdCBpZE1hdGNoID0gYXBpW2luZGV4XS5tYXRjaCgvaWQ9KFteJl0qKS8pOwoJCQkJCWlmIChpZE1hdGNoKSDoioLngrnlpIfms6ggPSBpZE1hdGNoWzFdOwoKCQkJCQljb25zdCBwb3J0TWF0Y2ggPSBhcGlbaW5kZXhdLm1hdGNoKC9wb3J0PShbXiZdKikvKTsKCQkJCQlpZiAocG9ydE1hdGNoKSDmtYvpgJ/nq6/lj6MgPSBwb3J0TWF0Y2hbMV07CgoJCQkJCWZvciAobGV0IGkgPSAxOyBpIDwgbGluZXMubGVuZ3RoOyBpKyspIHsKCQkJCQkJY29uc3QgY29sdW1ucyA9IGxpbmVzW2ldLnNwbGl0KCcsJylbMF07CgkJCQkJCWlmIChjb2x1bW5zKSB7CgkJCQkJCQluZXdhcGkgKz0gYCR7Y29sdW1uc306JHvmtYvpgJ/nq6/lj6N9JHvoioLngrnlpIfms6ggPyBgIyR76IqC54K55aSH5rOofWAgOiAnJ31cbmA7CgkJCQkJCQlpZiAoYXBpW2luZGV4XS5pbmNsdWRlcygncHJveHlpcD10cnVlJykpIHByb3h5SVBQb29sLnB1c2goYCR7Y29sdW1uc306JHvmtYvpgJ/nq6/lj6N9YCk7CgkJCQkJCX0KCQkJCQl9CgkJCQl9IGVsc2UgewoJCQkJCS8vIOmqjOivgeW9k+WJjWFwaVVybOaYr+WQpuW4puaciSdwcm94eWlwPXRydWUnCgkJCQkJaWYgKGFwaVtpbmRleF0uaW5jbHVkZXMoJ3Byb3h5aXA9dHJ1ZScpKSB7CgkJCQkJCS8vIOWmguaenFVSTOW4puaciSdwcm94eWlwPXRydWUn77yM5YiZ5bCG5YaF5a655re75Yqg5YiwcHJveHlJUFBvb2wKCQkJCQkJcHJveHlJUFBvb2wgPSBwcm94eUlQUG9vbC5jb25jYXQoKGF3YWl0IOaVtOeQhihjb250ZW50KSkubWFwKGl0ZW0gPT4gewoJCQkJCQkJY29uc3QgYmFzZUl0ZW0gPSBpdGVtLnNwbGl0KCcjJylbMF0gfHwgaXRlbTsKCQkJCQkJCWlmIChiYXNlSXRlbS5pbmNsdWRlcygnOicpKSB7CgkJCQkJCQkJY29uc3QgcG9ydCA9IGJhc2VJdGVtLnNwbGl0KCc6JylbMV07CgkJCQkJCQkJaWYgKCFodHRwc1BvcnRzLmluY2x1ZGVzKHBvcnQpKSB7CgkJCQkJCQkJCXJldHVybiBiYXNlSXRlbTsKCQkJCQkJCQl9CgkJCQkJCQl9IGVsc2UgewoJCQkJCQkJCXJldHVybiBgJHtiYXNlSXRlbX06NDQzYDsKCQkJCQkJCX0KCQkJCQkJCXJldHVybiBudWxsOyAvLyDkuI3nrKblkIjmnaHku7bml7bov5Tlm54gbnVsbAoJCQkJCQl9KS5maWx0ZXIoQm9vbGVhbikpOyAvLyDov4fmu6TmjokgbnVsbCDlgLwKCQkJCQl9CgkJCQkJLy8g5bCG5YaF5a655re75Yqg5YiwbmV3YXBp5LitCgkJCQkJbmV3YXBpICs9IGNvbnRlbnQgKyAnXG4nOwoJCQkJfQoJCQl9CgkJfQoJfSBjYXRjaCAoZXJyb3IpIHsKCQljb25zb2xlLmVycm9yKGVycm9yKTsKCX0gZmluYWxseSB7CgkJLy8g5peg6K665oiQ5Yqf5oiW5aSx6LSl77yM5pyA5ZCO6YO95riF6Zmk6K6+572u55qE6LaF5pe25a6a5pe25ZmoCgkJY2xlYXJUaW1lb3V0KHRpbWVvdXQpOwoJfQoKCWNvbnN0IG5ld0FkZHJlc3Nlc2FwaSA9IGF3YWl0IOaVtOeQhihuZXdhcGkpOwoKCS8vIOi/lOWbnuWkhOeQhuWQjueahOe7k+aenAoJcmV0dXJuIG5ld0FkZHJlc3Nlc2FwaTsKfQoKYXN5bmMgZnVuY3Rpb24g5pW055CG5rWL6YCf57uT5p6cKHRscykgewoJLy8g5Y+C5pWw6aqM6K+BCglpZiAoIXRscykgewoJCWNvbnNvbGUuZXJyb3IoJ1RMU+WPguaVsOS4jeiDveS4uuepuicpOwoJCXJldHVybiBbXTsKCX0KCgkvLyDmo4Dmn6VDU1blnLDlnYDliJfooagKCWlmICghQXJyYXkuaXNBcnJheShhZGRyZXNzZXNjc3YpIHx8IGFkZHJlc3Nlc2Nzdi5sZW5ndGggPT09IDApIHsKCQljb25zb2xlLndhcm4oJ+ayoeacieWPr+eUqOeahENTVuWcsOWdgOWIl+ihqCcpOwoJCXJldHVybiBbXTsKCX0KCgkvLyBDU1bop6PmnpDlh73mlbAKCWZ1bmN0aW9uIHBhcnNlQ1NWKHRleHQpIHsKCQlyZXR1cm4gdGV4dAoJCQkucmVwbGFjZSgvXHJcbi9nLCAnXG4nKSAgIC8vIOe7n+S4gFdpbmRvd3PmjaLooYwKCQkJLnJlcGxhY2UoL1xyL2csICdcbicpCSAvLyDlpITnkIbogIFNYWPmjaLooYwKCQkJLnNwbGl0KCdcbicpCQkJICAgLy8g5oyJVW5peC9MaW51eOmjjuagvOWIhuWJsgoJCQkuZmlsdGVyKGxpbmUgPT4gbGluZS50cmltKCkgIT09ICcnKSAgLy8g56e76Zmk56m66KGMCgkJCS5tYXAobGluZSA9PiBsaW5lLnNwbGl0KCcsJykubWFwKGNlbGwgPT4gY2VsbC50cmltKCkpKTsKCX0KCgkvLyDlubbooYzlpITnkIZDU1YKCWNvbnN0IGNzdlByb21pc2VzID0gYWRkcmVzc2VzY3N2Lm1hcChhc3luYyAoY3N2VXJsKSA9PiB7CgkJdHJ5IHsKCQkJY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBmZXRjaChjc3ZVcmwpOwoKCQkJaWYgKCFyZXNwb25zZS5vaykgewoJCQkJdGhyb3cgbmV3IEVycm9yKGBIVFRQ6ZSZ6K+vICR7cmVzcG9uc2Uuc3RhdHVzfTogJHtyZXNwb25zZS5zdGF0dXNUZXh0fWApOwoJCQl9CgoJCQljb25zdCB0ZXh0ID0gYXdhaXQgcmVzcG9uc2UudGV4dCgpOwoJCQljb25zdCByb3dzID0gcGFyc2VDU1YodGV4dCk7CgoJCQkvLyDop6PmnoTlkozpqozor4FDU1blpLTpg6gKCQkJY29uc3QgW2hlYWRlciwgLi4uZGF0YVJvd3NdID0gcm93czsKCQkJY29uc3QgdGxzSW5kZXggPSBoZWFkZXIuZmluZEluZGV4KGNvbCA9PiBjb2wudG9VcHBlckNhc2UoKSA9PT0gJ1RMUycpOwoKCQkJaWYgKHRsc0luZGV4ID09PSAtMSkgewoJCQkJdGhyb3cgbmV3IEVycm9yKCdDU1bmlofku7bnvLrlsJHlv4XpnIDnmoTlrZfmrrUnKTsKCQkJfQoKCQkJcmV0dXJuIGRhdGFSb3dzCgkJCQkuZmlsdGVyKHJvdyA9PiB7CgkJCQkJY29uc3QgdGxzVmFsdWUgPSByb3dbdGxzSW5kZXhdLnRvVXBwZXJDYXNlKCk7CgkJCQkJY29uc3Qgc3BlZWQgPSBwYXJzZUZsb2F0KHJvd1tyb3cubGVuZ3RoIC0gMV0pOwoJCQkJCXJldHVybiB0bHNWYWx1ZSA9PT0gdGxzLnRvVXBwZXJDYXNlKCkgJiYgc3BlZWQgPiBETFM7CgkJCQl9KQoJCQkJLm1hcChyb3cgPT4gewoJCQkJCWNvbnN0IGlwQWRkcmVzcyA9IHJvd1swXTsKCQkJCQljb25zdCBwb3J0ID0gcm93WzFdOwoJCQkJCWNvbnN0IGRhdGFDZW50ZXIgPSByb3dbdGxzSW5kZXggKyByZW1hcmtJbmRleF07CgkJCQkJY29uc3QgZm9ybWF0dGVkQWRkcmVzcyA9IGAke2lwQWRkcmVzc306JHtwb3J0fSMke2RhdGFDZW50ZXJ9YDsKCgkJCQkJLy8g5aSE55CG5Luj55CGSVDmsaAKCQkJCQlpZiAoY3N2VXJsLmluY2x1ZGVzKCdwcm94eWlwPXRydWUnKSAmJgoJCQkJCQlyb3dbdGxzSW5kZXhdLnRvVXBwZXJDYXNlKCkgPT09ICdUUlVFJyAmJgoJCQkJCQkhaHR0cHNQb3J0cy5pbmNsdWRlcyhwb3J0KSkgewoJCQkJCQlwcm94eUlQUG9vbC5wdXNoKGAke2lwQWRkcmVzc306JHtwb3J0fWApOwoJCQkJCX0KCgkJCQkJcmV0dXJuIGZvcm1hdHRlZEFkZHJlc3M7CgkJCQl9KTsKCQl9IGNhdGNoIChlcnJvcikgewoJCQljb25zb2xlLmVycm9yKGDlpITnkIZDU1YgJHtjc3ZVcmx9IOaXtuWHuumUmTpgLCBlcnJvcik7CgkJCXJldHVybiBbXTsKCQl9Cgl9KTsKCgkvLyDkvb/nlKhQcm9taXNlLmFsbOW5tuihjOWkhOeQhuW5tuWxleW5s+e7k+aenAoJY29uc3QgcmVzdWx0cyA9IGF3YWl0IFByb21pc2UuYWxsKGNzdlByb21pc2VzKTsKCXJldHVybiByZXN1bHRzLmZsYXQoKTsKfQoKYXN5bmMgZnVuY3Rpb24g5pW055CGKOWGheWuuSkgewoJLy8g5bCG5Yi26KGo56ym44CB5Y+M5byV5Y+344CB5Y2V5byV5Y+35ZKM5o2i6KGM56ym6YO95pu/5o2i5Li66YCX5Y+3CgkvLyDnhLblkI7lsIbov57nu63nmoTlpJrkuKrpgJflj7fmm7/mjaLkuLrljZXkuKrpgJflj7cKCXZhciDmm7/mjaLlkI7nmoTlhoXlrrkgPSDlhoXlrrkucmVwbGFjZSgvWwl8IidcclxuXSsvZywgJywnKS5yZXBsYWNlKC8sKy9nLCAnLCcpOwoKCS8vIOWIoOmZpOW8gOWktOWSjOe7k+WwvueahOmAl+WPt++8iOWmguaenOacieeahOivne+8iQoJaWYgKOabv+aNouWQjueahOWGheWuuS5jaGFyQXQoMCkgPT0gJywnKSDmm7/mjaLlkI7nmoTlhoXlrrkgPSDmm7/mjaLlkI7nmoTlhoXlrrkuc2xpY2UoMSk7CglpZiAo5pu/5o2i5ZCO55qE5YaF5a65LmNoYXJBdCjmm7/mjaLlkI7nmoTlhoXlrrkubGVuZ3RoIC0gMSkgPT0gJywnKSDmm7/mjaLlkI7nmoTlhoXlrrkgPSDmm7/mjaLlkI7nmoTlhoXlrrkuc2xpY2UoMCwg5pu/5o2i5ZCO55qE5YaF5a65Lmxlbmd0aCAtIDEpOwoKCS8vIOS9v+eUqOmAl+WPt+WIhuWJsuWtl+espuS4su+8jOW+l+WIsOWcsOWdgOaVsOe7hAoJY29uc3Qg5Zyw5Z2A5pWw57uEID0g5pu/5o2i5ZCO55qE5YaF5a65LnNwbGl0KCcsJyk7CgoJcmV0dXJuIOWcsOWdgOaVsOe7hDsKfQoKYXN5bmMgZnVuY3Rpb24gc2VuZE1lc3NhZ2UodHlwZSwgaXAsIGFkZF9kYXRhID0gIiIpIHsKCWlmICghQm90VG9rZW4gfHwgIUNoYXRJRCkgcmV0dXJuOwoKCXRyeSB7CgkJbGV0IG1zZyA9ICIiOwoJCWNvbnN0IHJlc3BvbnNlID0gYXdhaXQgZmV0Y2goYGh0dHA6Ly9pcC1hcGkuY29tL2pzb24vJHtpcH0/bGFuZz16aC1DTmApOwoJCWlmIChyZXNwb25zZS5vaykgewoJCQljb25zdCBpcEluZm8gPSBhd2FpdCByZXNwb25zZS5qc29uKCk7CgkJCW1zZyA9IGAke3R5cGV9XG5JUDogJHtpcH1cbuWbveWutjogJHtpcEluZm8uY291bnRyeX1cbjx0Zy1zcG9pbGVyPuWfjuW4gjogJHtpcEluZm8uY2l0eX1cbue7hOe7hzogJHtpcEluZm8ub3JnfVxuQVNOOiAke2lwSW5mby5hc31cbiR7YWRkX2RhdGF9YDsKCQl9IGVsc2UgewoJCQltc2cgPSBgJHt0eXBlfVxuSVA6ICR7aXB9XG48dGctc3BvaWxlcj4ke2FkZF9kYXRhfWA7CgkJfQoKCQljb25zdCB1cmwgPSBgaHR0cHM6Ly9hcGkudGVsZWdyYW0ub3JnL2JvdCR7Qm90VG9rZW59L3NlbmRNZXNzYWdlP2NoYXRfaWQ9JHtDaGF0SUR9JnBhcnNlX21vZGU9SFRNTCZ0ZXh0PSR7ZW5jb2RlVVJJQ29tcG9uZW50KG1zZyl9YDsKCQlyZXR1cm4gZmV0Y2godXJsLCB7CgkJCW1ldGhvZDogJ0dFVCcsCgkJCWhlYWRlcnM6IHsKCQkJCSdBY2NlcHQnOiAndGV4dC9odG1sLGFwcGxpY2F0aW9uL3hodG1sK3htbCxhcHBsaWNhdGlvbi94bWw7JywKCQkJCSdBY2NlcHQtRW5jb2RpbmcnOiAnZ3ppcCwgZGVmbGF0ZSwgYnInLAoJCQkJJ1VzZXItQWdlbnQnOiAnTW96aWxsYS81LjAgQ2hyb21lLzkwLjAuNDQzMC43MicKCQkJfQoJCX0pOwoJfSBjYXRjaCAoZXJyb3IpIHsKCQljb25zb2xlLmVycm9yKCdFcnJvciBzZW5kaW5nIG1lc3NhZ2U6JywgZXJyb3IpOwoJfQp9Cgphc3luYyBmdW5jdGlvbiBuZ2lueCgpIHsKCWNvbnN0IHRleHQgPSBgCgk8IURPQ1RZUEUgaHRtbD4KCTxodG1sPgoJPGhlYWQ+Cgk8dGl0bGU+V2VsY29tZSB0byBuZ2lueCE8L3RpdGxlPgoJPHN0eWxlPgoJCWJvZHkgewoJCQl3aWR0aDogMzVlbTsKCQkJbWFyZ2luOiAwIGF1dG87CgkJCWZvbnQtZmFtaWx5OiBUYWhvbWEsIFZlcmRhbmEsIEFyaWFsLCBzYW5zLXNlcmlmOwoJCX0KCTwvc3R5bGU+Cgk8L2hlYWQ+Cgk8Ym9keT4KCTxoMT5XZWxjb21lIHRvIG5naW54ITwvaDE+Cgk8cD5JZiB5b3Ugc2VlIHRoaXMgcGFnZSwgdGhlIG5naW54IHdlYiBzZXJ2ZXIgaXMgc3VjY2Vzc2Z1bGx5IGluc3RhbGxlZCBhbmQKCXdvcmtpbmcuIEZ1cnRoZXIgY29uZmlndXJhdGlvbiBpcyByZXF1aXJlZC48L3A+CgkKCTxwPkZvciBvbmxpbmUgZG9jdW1lbnRhdGlvbiBhbmQgc3VwcG9ydCBwbGVhc2UgcmVmZXIgdG8KCTxhIGhyZWY9Imh0dHA6Ly9uZ2lueC5vcmcvIj5uZ2lueC5vcmc8L2E+Ljxici8+CglDb21tZXJjaWFsIHN1cHBvcnQgaXMgYXZhaWxhYmxlIGF0Cgk8YSBocmVmPSJodHRwOi8vbmdpbnguY29tLyI+bmdpbnguY29tPC9hPi48L3A+CgkKCTxwPjxlbT5UaGFuayB5b3UgZm9yIHVzaW5nIG5naW54LjwvZW0+PC9wPgoJPC9ib2R5PgoJPC9odG1sPgoJYAoJcmV0dXJuIHRleHQ7Cn0KCmZ1bmN0aW9uIHN1cmdlKGNvbnRlbnQsIHVybCwgcGF0aCkgewoJbGV0IOavj+ihjOWGheWuuTsKCWlmIChjb250ZW50LmluY2x1ZGVzKCdcclxuJykpIHsKCQnmr4/ooYzlhoXlrrkgPSBjb250ZW50LnNwbGl0KCdcclxuJyk7Cgl9IGVsc2UgewoJCeavj+ihjOWGheWuuSA9IGNvbnRlbnQuc3BsaXQoJ1xuJyk7Cgl9CgoJbGV0IOi+k+WHuuWGheWuuSA9ICIiOwoJZm9yIChsZXQgeCBvZiDmr4/ooYzlhoXlrrkpIHsKCQlpZiAoeC5pbmNsdWRlcyhhdG9iKCdQU0IwY205cVlXNHMnKSkpIHsKCQkJY29uc3QgaG9zdCA9IHguc3BsaXQoInNuaT0iKVsxXS5zcGxpdCgiLCIpWzBdOwoJCQljb25zdCDlpIfmlLnlhoXlrrkgPSBgc2tpcC1jZXJ0LXZlcmlmeT10cnVlLCB0Zm89ZmFsc2UsIHVkcC1yZWxheT1mYWxzZWA7CgkJCWNvbnN0IOato+ehruWGheWuuSA9IGBza2lwLWNlcnQtdmVyaWZ5PXRydWUsIHdzPXRydWUsIHdzLXBhdGg9JHtwYXRofSwgd3MtaGVhZGVycz1Ib3N0OiIke2hvc3R9IiwgdGZvPWZhbHNlLCB1ZHAtcmVsYXk9ZmFsc2VgOwoJCQnovpPlh7rlhoXlrrkgKz0geC5yZXBsYWNlKG5ldyBSZWdFeHAo5aSH5pS55YaF5a65LCAnZycpLCDmraPnoa7lhoXlrrkpLnJlcGxhY2UoIlsiLCAiIikucmVwbGFjZSgiXSIsICIiKSArICdcbic7CgkJfSBlbHNlIHsKCQkJ6L6T5Ye65YaF5a65ICs9IHggKyAnXG4nOwoJCX0KCX0KCgnovpPlh7rlhoXlrrkgPSBgIyFNQU5BR0VELUNPTkZJRyAke3VybC5ocmVmfSBpbnRlcnZhbD04NjQwMCBzdHJpY3Q9ZmFsc2VgICsg6L6T5Ye65YaF5a65LnN1YnN0cmluZyjovpPlh7rlhoXlrrkuaW5kZXhPZignXG4nKSk7CglyZXR1cm4g6L6T5Ye65YaF5a65Owp9CgpmdW5jdGlvbiBnZXRSYW5kb21Qcm94eUJ5TWF0Y2goQ0MsIHNvY2tzNURhdGEpIHsKCS8vIOWwhuWMuemFjeWtl+espuS4sui9rOaNouS4uuWwj+WGmQoJY29uc3QgbG93ZXJDYXNlTWF0Y2ggPSBDQy50b0xvd2VyQ2FzZSgpOwoKCS8vIOi/h+a7pOWHuuaJgOacieS7peaMh+WumuWMuemFjeWtl+espuS4sue7k+WwvueahOS7o+eQhuWtl+espuS4sgoJbGV0IGZpbHRlcmVkUHJveGllcyA9IHNvY2tzNURhdGEuZmlsdGVyKHByb3h5ID0+IHByb3h5LnRvTG93ZXJDYXNlKCkuZW5kc1dpdGgoYCMke2xvd2VyQ2FzZU1hdGNofWApKTsKCgkvLyDlpoLmnpzmsqHmnInljLnphY3nmoTku6PnkIbvvIzlsJ3or5XljLnphY0gIlVTIgoJaWYgKGZpbHRlcmVkUHJveGllcy5sZW5ndGggPT09IDApIHsKCQlmaWx0ZXJlZFByb3hpZXMgPSBzb2NrczVEYXRhLmZpbHRlcihwcm94eSA9PiBwcm94eS50b0xvd2VyQ2FzZSgpLmVuZHNXaXRoKGAjdXNgKSk7Cgl9CgoJLy8g5aaC5p6c6L+Y5piv5rKh5pyJ5Yy56YWN55qE5Luj55CG77yM5LuO5pW05Liq5Luj55CG5YiX6KGo5Lit6ZqP5py66YCJ5oup5LiA5LiqCglpZiAoZmlsdGVyZWRQcm94aWVzLmxlbmd0aCA9PT0gMCkgewoJCXJldHVybiBzb2NrczVEYXRhW01hdGguZmxvb3IoTWF0aC5yYW5kb20oKSAqIHNvY2tzNURhdGEubGVuZ3RoKV07Cgl9CgoJLy8g5LuO5Yy56YWN55qE5Luj55CG5Lit6ZqP5py66YCJ5oup5LiA5Liq5bm26L+U5ZueCgljb25zdCByYW5kb21Qcm94eSA9IGZpbHRlcmVkUHJveGllc1tNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKiBmaWx0ZXJlZFByb3hpZXMubGVuZ3RoKV07CglyZXR1cm4gcmFuZG9tUHJveHk7Cn0KCmFzeW5jIGZ1bmN0aW9uIE1ENU1ENSh0ZXh0KSB7Cgljb25zdCBlbmNvZGVyID0gbmV3IFRleHRFbmNvZGVyKCk7CgoJY29uc3QgZmlyc3RQYXNzID0gYXdhaXQgY3J5cHRvLnN1YnRsZS5kaWdlc3QoJ01ENScsIGVuY29kZXIuZW5jb2RlKHRleHQpKTsKCWNvbnN0IGZpcnN0UGFzc0FycmF5ID0gQXJyYXkuZnJvbShuZXcgVWludDhBcnJheShmaXJzdFBhc3MpKTsKCWNvbnN0IGZpcnN0SGV4ID0gZmlyc3RQYXNzQXJyYXkubWFwKGIgPT4gYi50b1N0cmluZygxNikucGFkU3RhcnQoMiwgJzAnKSkuam9pbignJyk7CgoJY29uc3Qgc2Vjb25kUGFzcyA9IGF3YWl0IGNyeXB0by5zdWJ0bGUuZGlnZXN0KCdNRDUnLCBlbmNvZGVyLmVuY29kZShmaXJzdEhleC5zbGljZSg3LCAyNykpKTsKCWNvbnN0IHNlY29uZFBhc3NBcnJheSA9IEFycmF5LmZyb20obmV3IFVpbnQ4QXJyYXkoc2Vjb25kUGFzcykpOwoJY29uc3Qgc2Vjb25kSGV4ID0gc2Vjb25kUGFzc0FycmF5Lm1hcChiID0+IGIudG9TdHJpbmcoMTYpLnBhZFN0YXJ0KDIsICcwJykpLmpvaW4oJycpOwoKCXJldHVybiBzZWNvbmRIZXgudG9Mb3dlckNhc2UoKTsKfQoKZnVuY3Rpb24gcmV2ZXJ0RmFrZUluZm8oY29udGVudCwgdXNlcklELCBob3N0TmFtZSkgewoJY29udGVudCA9IGNvbnRlbnQucmVwbGFjZShuZXcgUmVnRXhwKGZha2VVc2VySUQsICdnJyksIHVzZXJJRCkucmVwbGFjZShuZXcgUmVnRXhwKGZha2VIb3N0TmFtZSwgJ2cnKSwgaG9zdE5hbWUpOwoJcmV0dXJuIGNvbnRlbnQ7Cn0KCmZ1bmN0aW9uIGdlbmVyYXRlRmFrZUluZm8oY29udGVudCwgdXNlcklELCBob3N0TmFtZSkgewoJY29udGVudCA9IGNvbnRlbnQucmVwbGFjZShuZXcgUmVnRXhwKHVzZXJJRCwgJ2cnKSwgZmFrZVVzZXJJRCkucmVwbGFjZShuZXcgUmVnRXhwKGhvc3ROYW1lLCAnZycpLCBmYWtlSG9zdE5hbWUpOwoJcmV0dXJuIGNvbnRlbnQ7Cn0KCmZ1bmN0aW9uIGlzVmFsaWRJUHY0KGFkZHJlc3MpIHsKCWNvbnN0IGlwdjRSZWdleCA9IC9eKDI1WzAtNV18MlswLTRdWzAtOV18WzAxXT9bMC05XVswLTldPylcLigyNVswLTVdfDJbMC00XVswLTldfFswMV0/WzAtOV1bMC05XT8pXC4oMjVbMC01XXwyWzAtNF1bMC05XXxbMDFdP1swLTldWzAtOV0/KVwuKDI1WzAtNV18MlswLTRdWzAtOV18WzAxXT9bMC05XVswLTldPykkLzsKCXJldHVybiBpcHY0UmVnZXgudGVzdChhZGRyZXNzKTsKfQoKZnVuY3Rpb24g55Sf5oiQ5Yqo5oCBVVVJRCjlr4bpkqUpIHsKCWNvbnN0IOaXtuWMuuWBj+enuyA9IDg7IC8vIOWMl+S6rOaXtumXtOebuOWvueS6jlVUQ+eahOaXtuWMuuWBj+enuys45bCP5pe2Cgljb25zdCDotbflp4vml6XmnJ8gPSBuZXcgRGF0ZSgyMDA3LCA2LCA3LCDmm7TmlrDml7bpl7QsIDAsIDApOyAvLyDlm7rlrprotbflp4vml6XmnJ/kuLoyMDA35bm0N+aciDfml6XnmoTlh4zmmagz54K5Cgljb25zdCDkuIDlkajnmoTmr6vnp5LmlbAgPSAxMDAwICogNjAgKiA2MCAqIDI0ICog5pyJ5pWI5pe26Ze0OwoKCWZ1bmN0aW9uIOiOt+WPluW9k+WJjeWRqOaVsCgpIHsKCQljb25zdCDnjrDlnKggPSBuZXcgRGF0ZSgpOwoJCWNvbnN0IOiwg+aVtOWQjueahOeOsOWcqCA9IG5ldyBEYXRlKOeOsOWcqC5nZXRUaW1lKCkgKyDml7bljLrlgY/np7sgKiA2MCAqIDYwICogMTAwMCk7CgkJY29uc3Qg5pe26Ze05beuID0gTnVtYmVyKOiwg+aVtOWQjueahOeOsOWcqCkgLSBOdW1iZXIo6LW35aeL5pel5pyfKTsKCQlyZXR1cm4gTWF0aC5jZWlsKOaXtumXtOW3riAvIOS4gOWRqOeahOavq+enkuaVsCk7Cgl9CgoJZnVuY3Rpb24g55Sf5oiQVVVJRCjln7rnoYDlrZfnrKbkuLIpIHsKCQljb25zdCDlk4jluIznvJPlhrLljLogPSBuZXcgVGV4dEVuY29kZXIoKS5lbmNvZGUo5Z+656GA5a2X56ym5LiyKTsKCQlyZXR1cm4gY3J5cHRvLnN1YnRsZS5kaWdlc3QoJ1NIQS0yNTYnLCDlk4jluIznvJPlhrLljLopLnRoZW4oKOWTiOW4jCkgPT4gewoJCQljb25zdCDlk4jluIzmlbDnu4QgPSBBcnJheS5mcm9tKG5ldyBVaW50OEFycmF5KOWTiOW4jCkpOwoJCQljb25zdCDljYHlha3ov5vliLblk4jluIwgPSDlk4jluIzmlbDnu4QubWFwKGIgPT4gYi50b1N0cmluZygxNikucGFkU3RhcnQoMiwgJzAnKSkuam9pbignJyk7CgkJCXJldHVybiBgJHvljYHlha3ov5vliLblk4jluIwuc3Vic3RyKDAsIDgpfS0ke+WNgeWFrei/m+WItuWTiOW4jC5zdWJzdHIoOCwgNCl9LTQke+WNgeWFrei/m+WItuWTiOW4jC5zdWJzdHIoMTMsIDMpfS0keyhwYXJzZUludCjljYHlha3ov5vliLblk4jluIwuc3Vic3RyKDE2LCAyKSwgMTYpICYgMHgzZiB8IDB4ODApLnRvU3RyaW5nKDE2KX0ke+WNgeWFrei/m+WItuWTiOW4jC5zdWJzdHIoMTgsIDIpfS0ke+WNgeWFrei/m+WItuWTiOW4jC5zdWJzdHIoMjAsIDEyKX1gOwoJCX0pOwoJfQoKCWNvbnN0IOW9k+WJjeWRqOaVsCA9IOiOt+WPluW9k+WJjeWRqOaVsCgpOyAvLyDojrflj5blvZPliY3lkajmlbAKCWNvbnN0IOe7k+adn+aXtumXtCA9IG5ldyBEYXRlKOi1t+Wni+aXpeacny5nZXRUaW1lKCkgKyDlvZPliY3lkajmlbAgKiDkuIDlkajnmoTmr6vnp5LmlbApOwoKCS8vIOeUn+aIkOS4pOS4qiBVVUlECgljb25zdCDlvZPliY1VVUlEUHJvbWlzZSA9IOeUn+aIkFVVSUQo5a+G6ZKlICsg5b2T5YmN5ZGo5pWwKTsKCWNvbnN0IOS4iuS4gOS4qlVVSURQcm9taXNlID0g55Sf5oiQVVVJRCjlr4bpkqUgKyAo5b2T5YmN5ZGo5pWwIC0gMSkpOwoKCS8vIOagvOW8j+WMluWIsOacn+aXtumXtAoJY29uc3Qg5Yiw5pyf5pe26Ze0VVRDID0gbmV3IERhdGUo57uT5p2f5pe26Ze0LmdldFRpbWUoKSAtIOaXtuWMuuWBj+enuyAqIDYwICogNjAgKiAxMDAwKTsgLy8gVVRD5pe26Ze0Cgljb25zdCDliLDmnJ/ml7bpl7TlrZfnrKbkuLIgPSBg5Yiw5pyf5pe26Ze0KFVUQyk6ICR75Yiw5pyf5pe26Ze0VVRDLnRvSVNPU3RyaW5nKCkuc2xpY2UoMCwgMTkpLnJlcGxhY2UoJ1QnLCAnICcpfSAoVVRDKzgpOiAke+e7k+adn+aXtumXtC50b0lTT1N0cmluZygpLnNsaWNlKDAsIDE5KS5yZXBsYWNlKCdUJywgJyAnKX1cbmA7CgoJcmV0dXJuIFByb21pc2UuYWxsKFvlvZPliY1VVUlEUHJvbWlzZSwg5LiK5LiA5LiqVVVJRFByb21pc2UsIOWIsOacn+aXtumXtOWtl+espuS4sl0pOwp9Cgphc3luYyBmdW5jdGlvbiBnZXRMaW5rKOmHjeaWsOaxh+aAu+aJgOaciemTvuaOpSkgewoJbGV0IOiKgueCuUxJTksgPSBbXTsKCWxldCDorqLpmIXpk77mjqUgPSBbXTsKCWZvciAobGV0IHggb2Yg6YeN5paw5rGH5oC75omA5pyJ6ZO+5o6lKSB7CgkJaWYgKHgudG9Mb3dlckNhc2UoKS5zdGFydHNXaXRoKCdodHRwJykpIHsKCQkJ6K6i6ZiF6ZO+5o6lLnB1c2goeCk7CgkJfSBlbHNlIHsKCQkJ6IqC54K5TElOSy5wdXNoKHgpOwoJCX0KCX0KCglpZiAo6K6i6ZiF6ZO+5o6lICYmIOiuoumYhemTvuaOpS5sZW5ndGggIT09IDApIHsKCQlmdW5jdGlvbiBiYXNlNjREZWNvZGUoc3RyKSB7CgkJCWNvbnN0IGJ5dGVzID0gbmV3IFVpbnQ4QXJyYXkoYXRvYihzdHIpLnNwbGl0KCcnKS5tYXAoYyA9PiBjLmNoYXJDb2RlQXQoMCkpKTsKCQkJY29uc3QgZGVjb2RlciA9IG5ldyBUZXh0RGVjb2RlcigndXRmLTgnKTsKCQkJcmV0dXJuIGRlY29kZXIuZGVjb2RlKGJ5dGVzKTsKCQl9CgkJY29uc3QgY29udHJvbGxlciA9IG5ldyBBYm9ydENvbnRyb2xsZXIoKTsgLy8g5Yib5bu65LiA5LiqQWJvcnRDb250cm9sbGVy5a6e5L6L77yM55So5LqO5Y+W5raI6K+35rGCCgoJCWNvbnN0IHRpbWVvdXQgPSBzZXRUaW1lb3V0KCgpID0+IHsKCQkJY29udHJvbGxlci5hYm9ydCgpOyAvLyAy56eS5ZCO5Y+W5raI5omA5pyJ6K+35rGCCgkJfSwgMjAwMCk7CgoJCXRyeSB7CgkJCS8vIOS9v+eUqFByb21pc2UuYWxsU2V0dGxlZOetieW+heaJgOaciUFQSeivt+axguWujOaIkO+8jOaXoOiuuuaIkOWKn+aIluWksei0pQoJCQljb25zdCByZXNwb25zZXMgPSBhd2FpdCBQcm9taXNlLmFsbFNldHRsZWQo6K6i6ZiF6ZO+5o6lLm1hcChhcGlVcmwgPT4gZmV0Y2goYXBpVXJsLCB7CgkJCQltZXRob2Q6ICdnZXQnLAoJCQkJaGVhZGVyczogewoJCQkJCSdBY2NlcHQnOiAndGV4dC9odG1sLGFwcGxpY2F0aW9uL3hodG1sK3htbCxhcHBsaWNhdGlvbi94bWw7JywKCQkJCQknVXNlci1BZ2VudCc6IGBcdTAwNzZcdTAwMzJcdTAwNzJcdTAwNjFcdTAwNzlcdTAwNGVcdTAwMmYke0ZpbGVOYW1lICsgYXRvYignSUdOdGJHbDFMMWR2Y210bGNsWnNaWE56TW5OMVlnPT0nKX1gCgkJCQl9LAoJCQkJc2lnbmFsOiBjb250cm9sbGVyLnNpZ25hbCAvLyDlsIZBYm9ydENvbnRyb2xsZXLnmoTkv6Hlj7fph4/mt7vliqDliLBmZXRjaOivt+axguS4rQoJCQl9KS50aGVuKHJlc3BvbnNlID0+IHJlc3BvbnNlLm9rID8gcmVzcG9uc2UudGV4dCgpIDogUHJvbWlzZS5yZWplY3QoKSkpKTsKCgkJCS8vIOmBjeWOhuaJgOacieWTjeW6lAoJCQljb25zdCBtb2RpZmllZFJlc3BvbnNlcyA9IHJlc3BvbnNlcy5tYXAoKHJlc3BvbnNlLCBpbmRleCkgPT4gewoJCQkJLy8g5qOA5p+l5piv5ZCm6K+35rGC5oiQ5YqfCgkJCQlyZXR1cm4gewoJCQkJCXN0YXR1czogcmVzcG9uc2Uuc3RhdHVzLAoJCQkJCXZhbHVlOiByZXNwb25zZS5zdGF0dXMgPT09ICdmdWxmaWxsZWQnID8gcmVzcG9uc2UudmFsdWUgOiBudWxsLAoJCQkJCWFwaVVybDog6K6i6ZiF6ZO+5o6lW2luZGV4XSAvLyDlsIbljp/lp4vnmoRhcGlVcmzmt7vliqDliLDov5Tlm57lr7nosaHkuK0KCQkJCX07CgkJCX0pOwoKCQkJY29uc29sZS5sb2cobW9kaWZpZWRSZXNwb25zZXMpOyAvLyDovpPlh7rkv67mlLnlkI7nmoTlk43lupTmlbDnu4QKCgkJCWZvciAoY29uc3QgcmVzcG9uc2Ugb2YgbW9kaWZpZWRSZXNwb25zZXMpIHsKCQkJCS8vIOajgOafpeWTjeW6lOeKtuaAgeaYr+WQpuS4uidmdWxmaWxsZWQnCgkJCQlpZiAocmVzcG9uc2Uuc3RhdHVzID09PSAnZnVsZmlsbGVkJykgewoJCQkJCWNvbnN0IGNvbnRlbnQgPSBhd2FpdCByZXNwb25zZS52YWx1ZSB8fCAnbnVsbCc7IC8vIOiOt+WPluWTjeW6lOeahOWGheWuuQoJCQkJCWlmIChjb250ZW50LmluY2x1ZGVzKCc6Ly8nKSkgewoJCQkJCQljb25zdCBsaW5lcyA9IGNvbnRlbnQuaW5jbHVkZXMoJ1xyXG4nKSA/IGNvbnRlbnQuc3BsaXQoJ1xyXG4nKSA6IGNvbnRlbnQuc3BsaXQoJ1xuJyk7CgkJCQkJCeiKgueCuUxJTksgPSDoioLngrlMSU5LLmNvbmNhdChsaW5lcyk7CgkJCQkJfSBlbHNlIHsKCQkJCQkJY29uc3Qg5bCd6K+VYmFzZTY06Kej56CB5YaF5a65ID0gYmFzZTY0RGVjb2RlKGNvbnRlbnQpOwoJCQkJCQlpZiAo5bCd6K+VYmFzZTY06Kej56CB5YaF5a65LmluY2x1ZGVzKCc6Ly8nKSkgewoJCQkJCQkJY29uc3QgbGluZXMgPSDlsJ3or5ViYXNlNjTop6PnoIHlhoXlrrkuaW5jbHVkZXMoJ1xyXG4nKSA/IOWwneivlWJhc2U2NOino+eggeWGheWuuS5zcGxpdCgnXHJcbicpIDog5bCd6K+VYmFzZTY06Kej56CB5YaF5a65LnNwbGl0KCdcbicpOwoJCQkJCQkJ6IqC54K5TElOSyA9IOiKgueCuUxJTksuY29uY2F0KGxpbmVzKTsKCQkJCQkJfQoJCQkJCX0KCQkJCX0KCQkJfQoJCX0gY2F0Y2ggKGVycm9yKSB7CgkJCWNvbnNvbGUuZXJyb3IoZXJyb3IpOyAvLyDmjZXojrflubbovpPlh7rplJnor6/kv6Hmga8KCQl9IGZpbmFsbHkgewoJCQljbGVhclRpbWVvdXQodGltZW91dCk7IC8vIOa4hemZpOWumuaXtuWZqAoJCX0KCX0KCglyZXR1cm4g6IqC54K5TElOSzsKfQoKZnVuY3Rpb24gdXRmOFRvQmFzZTY0KHN0cikgewoJcmV0dXJuIGJ0b2EodW5lc2NhcGUoZW5jb2RlVVJJQ29tcG9uZW50KHN0cikpKTsKfQpjb25zdCBfX0VYUE9SVF9fID0gewoJYXN5bmMgZmV0Y2gocmVxdWVzdCwgZW52KSB7CgkJaWYgKGVudi5UT0tFTikg5b+r6YCf6K6i6ZiF6K6/6Zeu5YWl5Y+jID0gYXdhaXQg5pW055CGKGVudi5UT0tFTik7CgkJQm90VG9rZW4gPSBlbnYuVEdUT0tFTiB8fCBCb3RUb2tlbjsKCQlDaGF0SUQgPSBlbnYuVEdJRCB8fCBDaGF0SUQ7CgkJc3ViQ29udmVydGVyID0gZW52LlNVQkFQSSB8fCBzdWJDb252ZXJ0ZXI7CgkJaWYgKHN1YkNvbnZlcnRlci5pbmNsdWRlcygiaHR0cDovLyIpKSB7CgkJCXN1YkNvbnZlcnRlciA9IHN1YkNvbnZlcnRlci5zcGxpdCgiLy8iKVsxXTsKCQkJc3ViUHJvdG9jb2wgPSAnaHR0cCc7CgkJfSBlbHNlIHsKCQkJc3ViQ29udmVydGVyID0gc3ViQ29udmVydGVyLnNwbGl0KCIvLyIpWzFdIHx8IHN1YkNvbnZlcnRlcjsKCQl9CgkJc3ViQ29uZmlnID0gZW52LlNVQkNPTkZJRyB8fCBzdWJDb25maWc7CgkJRmlsZU5hbWUgPSBlbnYuU1VCTkFNRSB8fCBGaWxlTmFtZTsKCQlzb2NrczVEYXRhVVJMID0gZW52LlNPQ0tTNURBVEEgfHwgc29ja3M1RGF0YVVSTDsKCQlpZiAoZW52LkNNUFJPWFlJUFMpIOWMuemFjVBST1hZSVAgPSBhd2FpdCDmlbTnkIYoZW52LkNNUFJPWFlJUFMpOzsKCQlpZiAoZW52LkNGUE9SVFMpIGh0dHBzUG9ydHMgPSBhd2FpdCDmlbTnkIYoZW52LkNGUE9SVFMpOwoJCUVuZFBTID0gZW52LlBTIHx8IEVuZFBTOwoJCee9keermeWbvuaghyA9IGVudi5JQ08gPyBgPGxpbmsgcmVsPSJpY29uIiBzaXplcz0iMzJ4MzIiIGhyZWY9IiR7ZW52LklDT30iPmAgOiAnJzsKCQnnvZHnq5nlpLTlg48gPSBlbnYuUE5HID8gYDxkaXYgY2xhc3M9ImxvZ28td3JhcHBlciI+PGRpdiBjbGFzcz0ibG9nby1ib3JkZXIiPjwvZGl2PjxpbWcgc3JjPSIke2Vudi5QTkd9IiBhbHQ9IkxvZ28iPjwvZGl2PmAgOiAnJzsKCQlpZiAoZW52LklNRykgewoJCQljb25zdCBpbWdzID0gYXdhaXQg5pW055CGKGVudi5JTUcpOwoJCQnnvZHnq5nog4zmma8gPSBgYmFja2dyb3VuZC1pbWFnZTogdXJsKCcke2ltZ3NbTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpICogaW1ncy5sZW5ndGgpXX0nKTtgOwoJCX0gZWxzZSDnvZHnq5nog4zmma8gPSAnJzsKCQnnvZHnu5zlpIfmoYggPSBlbnYuQkVJQU4gfHwgZW52LkJZIHx8IOe9kee7nOWkh+ahiDsKCQljb25zdCB1c2VyQWdlbnRIZWFkZXIgPSByZXF1ZXN0LmhlYWRlcnMuZ2V0KCdVc2VyLUFnZW50Jyk7CgkJY29uc3QgdXNlckFnZW50ID0gdXNlckFnZW50SGVhZGVyID8gdXNlckFnZW50SGVhZGVyLnRvTG93ZXJDYXNlKCkgOiAibnVsbCI7CgkJY29uc3QgdXJsID0gbmV3IFVSTChyZXF1ZXN0LnVybCk7CgkJY29uc3QgZm9ybWF0ID0gdXJsLnNlYXJjaFBhcmFtcy5nZXQoJ2Zvcm1hdCcpID8gdXJsLnNlYXJjaFBhcmFtcy5nZXQoJ2Zvcm1hdCcpLnRvTG93ZXJDYXNlKCkgOiAibnVsbCI7CgkJbGV0IGhvc3QgPSAiIjsKCQlsZXQgdXVpZCA9ICIiOwoJCWxldCBwYXRoID0gIiI7CgkJbGV0IHNuaSA9ICIiOwoJCWxldCB0eXBlID0gIndzIjsKCQlhbHBuID0gZW52LkFMUE4gfHwgYWxwbjsKCQlsZXQgVUQgPSBNYXRoLmZsb29yKCgodGltZXN0YW1wIC0gRGF0ZS5ub3coKSkgLyB0aW1lc3RhbXAgKiA5OSAqIDEwOTk1MTE2Mjc3NzYpIC8gMik7CgkJaWYgKGVudi5VQSkgTWFtYUp1c3RLaWxsZWRBTWFuID0gTWFtYUp1c3RLaWxsZWRBTWFuLmNvbmNhdChhd2FpdCDmlbTnkIYoZW52LlVBKSk7CgoJCWNvbnN0IGN1cnJlbnREYXRlID0gbmV3IERhdGUoKTsKCQljb25zdCBmYWtlVXNlcklETUQ1ID0gYXdhaXQgTUQ1TUQ1KE1hdGguY2VpbChjdXJyZW50RGF0ZS5nZXRUaW1lKCkpKTsKCQlmYWtlVXNlcklEID0gZmFrZVVzZXJJRE1ENS5zbGljZSgwLCA4KSArICItIiArIGZha2VVc2VySURNRDUuc2xpY2UoOCwgMTIpICsgIi0iICsgZmFrZVVzZXJJRE1ENS5zbGljZSgxMiwgMTYpICsgIi0iICsgZmFrZVVzZXJJRE1ENS5zbGljZSgxNiwgMjApICsgIi0iICsgZmFrZVVzZXJJRE1ENS5zbGljZSgyMCk7CgkJZmFrZUhvc3ROYW1lID0gZmFrZVVzZXJJRE1ENS5zbGljZSg2LCA5KSArICIuIiArIGZha2VVc2VySURNRDUuc2xpY2UoMTMsIDE5KSArICIueHl6IjsKCgkJdG90YWwgPSB0b3RhbCAqIDEwOTk1MTE2Mjc3NzY7CgkJbGV0IGV4cGlyZSA9IE1hdGguZmxvb3IodGltZXN0YW1wIC8gMTAwMCk7CgoJCWxpbmsgPSBlbnYuTElOSyB8fCBsaW5rOwoKCQlpZiAoZW52LkFERCkgYWRkcmVzc2VzID0gYXdhaXQg5pW055CGKGVudi5BREQpOwoJCWlmIChlbnYuQUREQVBJKSBhZGRyZXNzZXNhcGkgPSBhd2FpdCDmlbTnkIYoZW52LkFEREFQSSk7CgkJaWYgKGVudi5BREROT1RMUykgYWRkcmVzc2Vzbm90bHMgPSBhd2FpdCDmlbTnkIYoZW52LkFERE5PVExTKTsKCQlpZiAoZW52LkFERE5PVExTQVBJKSBhZGRyZXNzZXNub3Rsc2FwaSA9IGF3YWl0IOaVtOeQhihlbnYuQURETk9UTFNBUEkpOwoJCWZ1bmN0aW9uIG1vdmVIdHRwVXJscyhzb3VyY2VBcnJheSwgdGFyZ2V0QXJyYXkpIHsKCQkJaWYgKCFBcnJheS5pc0FycmF5KHNvdXJjZUFycmF5KSB8fCBzb3VyY2VBcnJheS5sZW5ndGggPT09IDApIHJldHVybiBzb3VyY2VBcnJheSB8fCBbXTsKCQkJY29uc3QgaHR0cFJlZ2V4ID0gL15odHRwcz86XC9cLy9pOwoJCQljb25zdCBodHRwVXJscyA9IHNvdXJjZUFycmF5LmZpbHRlcihpdGVtID0+IGh0dHBSZWdleC50ZXN0KGl0ZW0pKTsKCQkJaWYgKGh0dHBVcmxzLmxlbmd0aCA+IDApIHsKCQkJCXRhcmdldEFycmF5LnB1c2goLi4uaHR0cFVybHMpOwoJCQkJcmV0dXJuIHNvdXJjZUFycmF5LmZpbHRlcihpdGVtID0+ICFodHRwUmVnZXgudGVzdChpdGVtKSk7CgkJCX0KCQkJcmV0dXJuIHNvdXJjZUFycmF5OwoJCX0KCQlhZGRyZXNzZXMgPSBtb3ZlSHR0cFVybHMoYWRkcmVzc2VzLCBhZGRyZXNzZXNhcGkpOwoJCWFkZHJlc3Nlc25vdGxzID0gbW92ZUh0dHBVcmxzKGFkZHJlc3Nlc25vdGxzLCBhZGRyZXNzZXNub3Rsc2FwaSk7CgkJaWYgKGVudi5BRERDU1YpIGFkZHJlc3Nlc2NzdiA9IGF3YWl0IOaVtOeQhihlbnYuQUREQ1NWKTsKCQlETFMgPSBOdW1iZXIoZW52LkRMUykgfHwgRExTOwoJCXJlbWFya0luZGV4ID0gTnVtYmVyKGVudi5DU1ZSRU1BUkspIHx8IHJlbWFya0luZGV4OwoKCQlpZiAoc29ja3M1RGF0YVVSTCkgewoJCQl0cnkgewoJCQkJY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBmZXRjaChzb2NrczVEYXRhVVJMKTsKCQkJCWNvbnN0IHNvY2tzNURhdGFUZXh0ID0gYXdhaXQgcmVzcG9uc2UudGV4dCgpOwoJCQkJaWYgKHNvY2tzNURhdGFUZXh0LmluY2x1ZGVzKCdcclxuJykpIHsKCQkJCQlzb2NrczVEYXRhID0gc29ja3M1RGF0YVRleHQuc3BsaXQoJ1xyXG4nKS5maWx0ZXIobGluZSA9PiBsaW5lLnRyaW0oKSAhPT0gJycpOwoJCQkJfSBlbHNlIHsKCQkJCQlzb2NrczVEYXRhID0gc29ja3M1RGF0YVRleHQuc3BsaXQoJ1xuJykuZmlsdGVyKGxpbmUgPT4gbGluZS50cmltKCkgIT09ICcnKTsKCQkJCX0KCQkJfSBjYXRjaCB7CgkJCQlzb2NrczVEYXRhID0gbnVsbDsKCQkJfQoJCX0KCgkJbGV0IOS4tOaXtnByb3h5SVBzID0gW107CgkJaWYgKGVudi5QUk9YWUlQKSDkuLTml7Zwcm94eUlQcyA9IGF3YWl0IOaVtOeQhihlbnYuUFJPWFlJUCk7CgkJaWYgKGVudi5QUk9YWUlQQVBJKSB7CgkJCWNvbnN0IHByb3h5SVBzYXBpID0gYXdhaXQg5pW055CGKGVudi5QUk9YWUlQQVBJKTsKCQkJaWYgKHByb3h5SVBzYXBpLmxlbmd0aCA+IDApIHsKCQkJCWNvbnN0IHJlc3BvbnNlID0gYXdhaXQgZmV0Y2gocHJveHlJUHNhcGlbMF0pOwoJCQkJaWYgKHJlc3BvbnNlLm9rKSB7CgkJCQkJY29uc3Qg5ZON5bqU5YaF5a65ID0gYXdhaXQgcmVzcG9uc2UudGV4dCgpOwoJCQkJCWNvbnN0IOaVtOeQhuaIkOaVsOe7hCA9IGF3YWl0IOaVtOeQhijlk43lupTlhoXlrrkpOwoJCQkJCWlmICjmlbTnkIbmiJDmlbDnu4QubGVuZ3RoID4gMCkgewoJCQkJCQnkuLTml7Zwcm94eUlQcyA9IOS4tOaXtnByb3h5SVBzLmNvbmNhdCjmlbTnkIbmiJDmlbDnu4QpOwkvL+i/veWKoOWIsHByb3h5SVBz5pWw57uE5LitCgkJCQkJfQoJCQkJfQoJCQl9CgkJfQoJCS8v5Y676YeN5Y676Zmk56m65YWD57SgCgkJ5Li05pe2cHJveHlJUHMgPSBbLi4ubmV3IFNldCjkuLTml7Zwcm94eUlQcy5maWx0ZXIoaXRlbSA9PiBpdGVtICYmIGl0ZW0udHJpbSgpICE9PSAnJykpXTsKCQlpZiAo5Li05pe2cHJveHlJUHMubGVuZ3RoID4gMCkgcHJveHlJUHMgPSDkuLTml7Zwcm94eUlQczsKCQkvL2NvbnNvbGUubG9nKHByb3h5SVBzKTsKCgkJaWYgKOW/q+mAn+iuoumYheiuv+mXruWFpeWPoy5sZW5ndGggPiAwICYmIOW/q+mAn+iuoumYheiuv+mXruWFpeWPoy5zb21lKHRva2VuID0+IHVybC5wYXRobmFtZSA9PT0gYC8ke3Rva2VufWApKSB7CgkJCWhvc3QgPSAibnVsbCI7CgkJCWlmIChlbnYuSE9TVCkgewoJCQkJY29uc3QgaG9zdHMgPSBhd2FpdCDmlbTnkIYoZW52LkhPU1QpOwoJCQkJaG9zdCA9IGhvc3RzW01hdGguZmxvb3IoTWF0aC5yYW5kb20oKSAqIGhvc3RzLmxlbmd0aCldOwoJCQl9CgoJCQlpZiAoZW52LlBBU1NXT1JEKSB7CgkJCQnljY/orq7nsbvlnosgPSBhdG9iKCdWSEp2YW1GdScpOwoJCQkJdXVpZCA9IGVudi5QQVNTV09SRAoJCQl9IGVsc2UgewoJCQkJ5Y2P6K6u57G75Z6LID0gYXRvYihgXHUwMDU2XHUwMDZiXHUwMDc4XHUwMDQ2XHUwMDU1XHUwMDMxXHUwMDRkXHUwMDNkYCk7CgkJCQlpZiAoZW52LktFWSkgewoJCQkJCeacieaViOaXtumXtCA9IE51bWJlcihlbnYuVElNRSkgfHwg5pyJ5pWI5pe26Ze0OwoJCQkJCeabtOaWsOaXtumXtCA9IE51bWJlcihlbnYuVVBUSU1FKSB8fCDmm7TmlrDml7bpl7Q7CgkJCQkJY29uc3QgdXNlcklEcyA9IGF3YWl0IOeUn+aIkOWKqOaAgVVVSUQoZW52LktFWSk7CgkJCQkJdXVpZCA9IHVzZXJJRHNbMF07CgkJCQl9IGVsc2UgewoJCQkJCXV1aWQgPSBlbnYuVVVJRCB8fCAibnVsbCI7CgkJCQl9CgkJCX0KCgkJCXBhdGggPSBlbnYuUEFUSCB8fCAiLz9lZD0yNTYwIjsKCQkJc25pID0gZW52LlNOSSB8fCBob3N0OwoJCQl0eXBlID0gZW52LlRZUEUgfHwgdHlwZTsKCQkJ6Zqn6YGT54mI5pys5L2c6ICFID0gZW52LkVEIHx8IOmap+mBk+eJiOacrOS9nOiAhTsKCQkJ6I635Y+W5Luj55CGSVAgPSBlbnYuUlBST1hZSVAgfHwgJ2ZhbHNlJzsKCgkJCWlmIChob3N0ID09ICJudWxsIiB8fCB1dWlkID09ICJudWxsIikgewoJCQkJbGV0IOepuuWtl+autTsKCQkJCWlmIChob3N0ID09ICJudWxsIiAmJiB1dWlkID09ICJudWxsIikg56m65a2X5q61ID0gIkhPU1QvVVVJRCI7CgkJCQllbHNlIGlmIChob3N0ID09ICJudWxsIikg56m65a2X5q61ID0gIkhPU1QiOwoJCQkJZWxzZSBpZiAodXVpZCA9PSAibnVsbCIpIOepuuWtl+autSA9ICJVVUlEIjsKCQkJCUVuZFBTICs9IGAg6K6i6ZiF5Zmo5YaF572u6IqC54K5ICR756m65a2X5q61fSDmnKrorr7nva7vvIHvvIHvvIFgOwoJCQl9CgoJCQlhd2FpdCBzZW5kTWVzc2FnZShgI+iOt+WPluiuoumYhSAke0ZpbGVOYW1lfWAsIHJlcXVlc3QuaGVhZGVycy5nZXQoJ0NGLUNvbm5lY3RpbmctSVAnKSwgYFVBOiAke3VzZXJBZ2VudEhlYWRlcn08L3RnLXNwb2lsZXI+XG7ln5/lkI06ICR7dXJsLmhvc3RuYW1lfVxuPHRnLXNwb2lsZXI+5YWl5Y+jOiAke3VybC5wYXRobmFtZSArIHVybC5zZWFyY2h9PC90Zy1zcG9pbGVyPmApOwoJCX0gZWxzZSB7CgkJCWhvc3QgPSB1cmwuc2VhcmNoUGFyYW1zLmdldCgnaG9zdCcpOwoJCQl1dWlkID0gdXJsLnNlYXJjaFBhcmFtcy5nZXQoJ3V1aWQnKSB8fCB1cmwuc2VhcmNoUGFyYW1zLmdldCgncGFzc3dvcmQnKSB8fCB1cmwuc2VhcmNoUGFyYW1zLmdldCgncHcnKTsKCQkJcGF0aCA9IHVybC5zZWFyY2hQYXJhbXMuZ2V0KCdwYXRoJyk7CgkJCXNuaSA9IHVybC5zZWFyY2hQYXJhbXMuZ2V0KCdzbmknKSB8fCBob3N0OwoJCQl0eXBlID0gdXJsLnNlYXJjaFBhcmFtcy5nZXQoJ3R5cGUnKSB8fCB0eXBlOwoJCQljb25zdCBtb2RlID0gdXJsLnNlYXJjaFBhcmFtcy5nZXQoJ21vZGUnKSB8fCBudWxsOwoJCQljb25zdCBleHRyYSA9IHVybC5zZWFyY2hQYXJhbXMuZ2V0KCdleHRyYScpIHx8IG51bGw7CgkJCXhodHRwID0gKG1vZGUgPyBgJm1vZGU9JHttb2RlfWAgOiAiIikgKyAoZXh0cmEgPyBgJmV4dHJhPSR7ZW5jb2RlVVJJQ29tcG9uZW50KGV4dHJhKX1gIDogIiIpOwoJCQlhbHBuID0gdXJsLnNlYXJjaFBhcmFtcy5nZXQoJ2FscG4nKSB8fCAoeGh0dHAgPyAiaDMlMkNoMiIgOiBhbHBuKTsKCQkJ6Zqn6YGT54mI5pys5L2c6ICFID0gdXJsLnNlYXJjaFBhcmFtcy5nZXQoYXRvYignWldSblpYUjFibTVsYkE9PScpKSB8fCB1cmwuc2VhcmNoUGFyYW1zLmdldChhdG9iKCdaWEJsYVhWeicpKSB8fCDpmqfpgZPniYjmnKzkvZzogIU7CgkJCeiOt+WPluS7o+eQhklQID0gdXJsLnNlYXJjaFBhcmFtcy5nZXQoJ3Byb3h5aXAnKSB8fCAnZmFsc2UnOwoKCQkJaWYgKHVybC5zZWFyY2hQYXJhbXMuaGFzKCdhbHRlcmlkJykpIHsKCQkJCeWNj+iuruexu+WeiyA9ICdWTWVzcyc7CgkJCQnpop3lpJZJRCA9IHVybC5zZWFyY2hQYXJhbXMuZ2V0KCdhbHRlcmlkJykgfHwg6aKd5aSWSUQ7CgkJCQnliqDlr4bmlrnlvI8gPSB1cmwuc2VhcmNoUGFyYW1zLmdldCgnc2VjdXJpdHknKSB8fCDliqDlr4bmlrnlvI87CgkJCX0gZWxzZSBpZiAodXJsLnNlYXJjaFBhcmFtcy5oYXMoYXRvYignWldSblpYUjFibTVsYkE9PScpKSB8fCB1cmwuc2VhcmNoUGFyYW1zLmhhcygndXVpZCcpKSB7CgkJCQnljY/orq7nsbvlnosgPSBhdG9iKCdWa3hGVTFNPScpOwoJCQl9IGVsc2UgaWYgKHVybC5zZWFyY2hQYXJhbXMuaGFzKGF0b2IoJ1pYQmxhWFZ6JykpIHx8IHVybC5zZWFyY2hQYXJhbXMuaGFzKCdwYXNzd29yZCcpIHx8IHVybC5zZWFyY2hQYXJhbXMuaGFzKCdwdycpKSB7CgkJCQnljY/orq7nsbvlnosgPSBhdG9iKCdWSEp2YW1GdScpOwoJCQl9CgoJCQlpZiAoIXVybC5wYXRobmFtZS5pbmNsdWRlcygiL3N1YiIpKSB7CgkJCQljb25zdCBlbnZLZXkgPSBlbnYuVVJMMzAyID8gJ1VSTDMwMicgOiAoZW52LlVSTCA/ICdVUkwnIDogbnVsbCk7CgkJCQlpZiAoZW52S2V5KSB7CgkJCQkJY29uc3QgVVJMcyA9IGF3YWl0IOaVtOeQhihlbnZbZW52S2V5XSk7CgkJCQkJaWYgKFVSTHMuaW5jbHVkZXMoJ25naW54JykpIHsKCQkJCQkJcmV0dXJuIG5ldyBSZXNwb25zZShhd2FpdCBuZ2lueCgpLCB7CgkJCQkJCQloZWFkZXJzOiB7CgkJCQkJCQkJJ0NvbnRlbnQtVHlwZSc6ICd0ZXh0L2h0bWw7IGNoYXJzZXQ9VVRGLTgnLAoJCQkJCQkJfSwKCQkJCQkJfSk7CgkJCQkJfQoJCQkJCWNvbnN0IFVSTCA9IFVSTHNbTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpICogVVJMcy5sZW5ndGgpXTsKCQkJCQlyZXR1cm4gZW52S2V5ID09PSAnVVJMMzAyJyA/IFJlc3BvbnNlLnJlZGlyZWN0KFVSTCwgMzAyKSA6IGZldGNoKG5ldyBSZXF1ZXN0KFVSTCwgcmVxdWVzdCkpOwoJCQkJfQoJCQkJcmV0dXJuIGF3YWl0IHN1Ykh0bWwocmVxdWVzdCk7CgkJCX0KCgkJCWlmICghaG9zdCB8fCAhdXVpZCkgewoJCQkJY29uc3QgcmVzcG9uc2VUZXh0ID0gYAoJCQnnvLrlsJHlv4Xloavlj4LmlbDvvJpob3N0IOWSjCB1dWlkCgkJCU1pc3NpbmcgcmVxdWlyZWQgcGFyYW1ldGVyczogaG9zdCBhbmQgdXVpZAoJCQnZvtin2LHYp9mF2KrYsdmH2KfbjCDYttix2YjYsduMINmI2KfYsdivINmG2LTYr9mHOiDZh9in2LPYqiDZiCDbjNmI2KLbjOKAjNiv24wKCQkJCgkJCSR7dXJsLm9yaWdpbn0vc3ViP2hvc3Q9W3lvdXIgaG9zdF0mdXVpZD1beW91ciB1dWlkXSZwYXRoPVt5b3VyIHBhdGhdCgkJCQoJCQkKCQkJCgkJCQoJCQkKCQkJCgkJCQkKCQkJCSR7YXRvYignYUhSMGNITTZMeTluYVhSb2RXSXVZMjl0TDJOdGJHbDFMM2R2Y210bGNsWnNaWE56TW5OMVlnPT0nKX0KCQkJCWA7CgoJCQkJcmV0dXJuIG5ldyBSZXNwb25zZShyZXNwb25zZVRleHQsIHsKCQkJCQlzdGF0dXM6IDIwMiwKCQkJCQloZWFkZXJzOiB7ICdjb250ZW50LXR5cGUnOiAndGV4dC9wbGFpbjsgY2hhcnNldD11dGYtOCcgfSwKCQkJCX0pOwoJCQl9CgoJCQlpZiAoIXBhdGggfHwgcGF0aC50cmltKCkgPT09ICcnKSB7CgkJCQlwYXRoID0gJy8/ZWQ9MjU2MCc7CgkJCX0gZWxzZSB7CgkJCQkvLyDlpoLmnpznrKzkuIDkuKrlrZfnrKbkuI3mmK/mlpzmnaDvvIzliJnlnKjliY3pnaLmt7vliqDkuIDkuKrmlpzmnaAKCQkJCXBhdGggPSAocGF0aFswXSA9PT0gJy8nKSA/IHBhdGggOiAnLycgKyBwYXRoOwoJCQl9CgkJfQoKCQkvLyDmnoTlu7rorqLpmIXlk43lupTlpLTlr7nosaEKCQljb25zdCByZXNwb25zZUhlYWRlcnMgPSB7CgkJCSJjb250ZW50LXR5cGUiOiAidGV4dC9wbGFpbjsgY2hhcnNldD11dGYtOCIsCgkJCSJQcm9maWxlLVVwZGF0ZS1JbnRlcnZhbCI6IGAke1NVQlVwZGF0ZVRpbWV9YCwKCQkJIlByb2ZpbGUtd2ViLXBhZ2UtdXJsIjogdXJsLm9yaWdpbiwKCQkJLy8iU3Vic2NyaXB0aW9uLVVzZXJpbmZvIjogYHVwbG9hZD0ke1VEfTsgZG93bmxvYWQ9JHtVRH07IHRvdGFsPSR7dG90YWx9OyBleHBpcmU9JHtleHBpcmV9YCwKCQl9OwoKCQlpZiAoaG9zdC50b0xvd2VyQ2FzZSgpLmluY2x1ZGVzKCdub3RscycpIHx8IGhvc3QudG9Mb3dlckNhc2UoKS5pbmNsdWRlcygnd29ya2VyJykgfHwgaG9zdC50b0xvd2VyQ2FzZSgpLmluY2x1ZGVzKCd0cnljbG91ZGZsYXJlJykpIG5vVExTID0gJ3RydWUnOwoJCW5vVExTID0gZW52Lk5PVExTIHx8IG5vVExTOwoJCWxldCBzdWJDb252ZXJ0ZXJVcmwgPSBnZW5lcmF0ZUZha2VJbmZvKHVybC5ocmVmLCB1dWlkLCBob3N0KTsKCQlpZiAodXNlckFnZW50LmluY2x1ZGVzKCdzdWJjb252ZXJ0ZXInKSkgYWxwbiA9ICcnOwoJCWlmICghdXNlckFnZW50LmluY2x1ZGVzKCdzdWJjb252ZXJ0ZXInKSAmJiBNYW1hSnVzdEtpbGxlZEFNYW4uc29tZShQdXRBR3VuQWdhaW5zdEhpc0hlYWRQdWxsZWRNeVRyaWdnZXJOb3dIZXNEZWFkID0+IHVzZXJBZ2VudC5pbmNsdWRlcyhQdXRBR3VuQWdhaW5zdEhpc0hlYWRQdWxsZWRNeVRyaWdnZXJOb3dIZXNEZWFkKSkgJiYgTWFtYUp1c3RLaWxsZWRBTWFuLmxlbmd0aCA+IDApIHsKCQkJY29uc3QgZW52S2V5ID0gZW52LlVSTDMwMiA/ICdVUkwzMDInIDogKGVudi5VUkwgPyAnVVJMJyA6IG51bGwpOwoJCQlpZiAoZW52S2V5KSB7CgkJCQljb25zdCBVUkxzID0gYXdhaXQg5pW055CGKGVudltlbnZLZXldKTsKCQkJCWlmIChVUkxzLmluY2x1ZGVzKCduZ2lueCcpKSB7CgkJCQkJcmV0dXJuIG5ldyBSZXNwb25zZShhd2FpdCBuZ2lueCgpLCB7CgkJCQkJCWhlYWRlcnM6IHsKCQkJCQkJCSdDb250ZW50LVR5cGUnOiAndGV4dC9odG1sOyBjaGFyc2V0PVVURi04JywKCQkJCQkJfSwKCQkJCQl9KTsKCQkJCX0KCQkJCWNvbnN0IFVSTCA9IFVSTHNbTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpICogVVJMcy5sZW5ndGgpXTsKCQkJCXJldHVybiBlbnZLZXkgPT09ICdVUkwzMDInID8gUmVzcG9uc2UucmVkaXJlY3QoVVJMLCAzMDIpIDogZmV0Y2gobmV3IFJlcXVlc3QoVVJMLCByZXF1ZXN0KSk7CgkJCX0KCQkJcmV0dXJuIGF3YWl0IHN1Ykh0bWwocmVxdWVzdCk7CgkJfSBlbHNlIGlmICgodXNlckFnZW50LmluY2x1ZGVzKCdjbGFzaCcpIHx8IHVzZXJBZ2VudC5pbmNsdWRlcygnbWV0YScpIHx8IHVzZXJBZ2VudC5pbmNsdWRlcygnbWlob21vJykgfHwgKGZvcm1hdCA9PT0gJ2NsYXNoJyAmJiAhdXNlckFnZW50LmluY2x1ZGVzKCdzdWJjb252ZXJ0ZXInKSkpICYmICF1c2VyQWdlbnQuaW5jbHVkZXMoJ25la29ib3gnKSAmJiAhdXNlckFnZW50LmluY2x1ZGVzKCdjZi13b3JrZXJzLXN1YicpKSB7CgkJCXN1YkNvbnZlcnRlclVybCA9IGAke3N1YlByb3RvY29sfTovLyR7c3ViQ29udmVydGVyfS9zdWI/dGFyZ2V0PWNsYXNoJnVybD0ke2VuY29kZVVSSUNvbXBvbmVudChzdWJDb252ZXJ0ZXJVcmwpfSZpbnNlcnQ9ZmFsc2UmY29uZmlnPSR7ZW5jb2RlVVJJQ29tcG9uZW50KHN1YkNvbmZpZyl9JmVtb2ppPXRydWUmbGlzdD1mYWxzZSZ0Zm89ZmFsc2Umc2N2PXRydWUmZmRuPWZhbHNlJnNvcnQ9ZmFsc2UmbmV3X25hbWU9dHJ1ZWA7CgkJfSBlbHNlIGlmICgodXNlckFnZW50LmluY2x1ZGVzKCdzaW5nLWJveCcpIHx8IHVzZXJBZ2VudC5pbmNsdWRlcygnc2luZ2JveCcpIHx8IChmb3JtYXQgPT09ICdzaW5nYm94JyAmJiAhdXNlckFnZW50LmluY2x1ZGVzKCdzdWJjb252ZXJ0ZXInKSkpICYmICF1c2VyQWdlbnQuaW5jbHVkZXMoJ2NmLXdvcmtlcnMtc3ViJykpIHsKCQkJaWYgKOWNj+iuruexu+WeiyA9PSAnVk1lc3MnICYmIHVybC5ocmVmLmluY2x1ZGVzKCdwYXRoPScpKSB7CgkJCQljb25zdCDot6/lvoTlj4LmlbDliY3pg6jliIYgPSB1cmwuaHJlZi5zcGxpdCgncGF0aD0nKVswXTsKCQkJCWNvbnN0IHBhcnRzID0gdXJsLmhyZWYuc3BsaXQoJ3BhdGg9JylbMV0uc3BsaXQoJyYnKTsKCQkJCWNvbnN0IOi3r+W+hOWPguaVsOWQjumDqOWIhiA9IHBhcnRzLnNsaWNlKDEpLmpvaW4oJyYnKSB8fCAnJzsKCQkJCWNvbnN0IOW+heWkhOeQhui3r+W+hOWPguaVsCA9IHVybC5ocmVmLnNwbGl0KCdwYXRoPScpWzFdLnNwbGl0KCcmJylbMF0gfHwgJyc7CgkJCQlpZiAo5b6F5aSE55CG6Lev5b6E5Y+C5pWwLmluY2x1ZGVzKCclM0YnKSkgc3ViQ29udmVydGVyVXJsID0gZ2VuZXJhdGVGYWtlSW5mbyjot6/lvoTlj4LmlbDliY3pg6jliIYgKyAncGF0aD0nICsg5b6F5aSE55CG6Lev5b6E5Y+C5pWwLnNwbGl0KCclM0YnKVswXSArICcmJyArIOi3r+W+hOWPguaVsOWQjumDqOWIhiwgdXVpZCwgaG9zdCk7CgkJCX0KCQkJc3ViQ29udmVydGVyVXJsID0gYCR7c3ViUHJvdG9jb2x9Oi8vJHtzdWJDb252ZXJ0ZXJ9L3N1Yj90YXJnZXQ9c2luZ2JveCZ1cmw9JHtlbmNvZGVVUklDb21wb25lbnQoc3ViQ29udmVydGVyVXJsKX0maW5zZXJ0PWZhbHNlJmNvbmZpZz0ke2VuY29kZVVSSUNvbXBvbmVudChzdWJDb25maWcpfSZlbW9qaT10cnVlJmxpc3Q9ZmFsc2UmdGZvPWZhbHNlJnNjdj10cnVlJmZkbj1mYWxzZSZzb3J0PWZhbHNlJm5ld19uYW1lPXRydWVgOwoJCX0gZWxzZSB7CgkJCWlmIChob3N0LmluY2x1ZGVzKCd3b3JrZXJzLmRldicpKSB7CgkJCQlpZiAo5Li05pe25Lit6L2s5Z+f5ZCN5o6l5Y+jKSB7CgkJCQkJdHJ5IHsKCQkJCQkJY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBmZXRjaCjkuLTml7bkuK3ovazln5/lkI3mjqXlj6MpOwoKCQkJCQkJaWYgKCFyZXNwb25zZS5vaykgewoJCQkJCQkJY29uc29sZS5lcnJvcign6I635Y+W5Zyw5Z2A5pe25Ye66ZSZOicsIHJlc3BvbnNlLnN0YXR1cywgcmVzcG9uc2Uuc3RhdHVzVGV4dCk7CgkJCQkJCQlyZXR1cm47IC8vIOWmguaenOaciemUmeivr++8jOebtOaOpei/lOWbngoJCQkJCQl9CgoJCQkJCQljb25zdCB0ZXh0ID0gYXdhaXQgcmVzcG9uc2UudGV4dCgpOwoJCQkJCQljb25zdCBsaW5lcyA9IHRleHQuc3BsaXQoJ1xuJyk7CgkJCQkJCS8vIOi/h+a7pOaOieepuuihjOaIluWPquWMheWQq+epuueZveWtl+espueahOihjAoJCQkJCQljb25zdCBub25FbXB0eUxpbmVzID0gbGluZXMuZmlsdGVyKGxpbmUgPT4gbGluZS50cmltKCkgIT09ICcnKTsKCgkJCQkJCeS4tOaXtuS4rei9rOWfn+WQjSA9IOS4tOaXtuS4rei9rOWfn+WQjS5jb25jYXQobm9uRW1wdHlMaW5lcyk7CgkJCQkJfSBjYXRjaCAoZXJyb3IpIHsKCQkJCQkJY29uc29sZS5lcnJvcign6I635Y+W5Zyw5Z2A5pe25Ye66ZSZOicsIGVycm9yKTsKCQkJCQl9CgkJCQl9CgkJCQkvLyDkvb/nlKhTZXTlr7nosaHljrvph40KCQkJCeS4tOaXtuS4rei9rOWfn+WQjSA9IFsuLi5uZXcgU2V0KOS4tOaXtuS4rei9rOWfn+WQjSldOwoJCQl9CgoJCQljb25zdCBuZXdBZGRyZXNzZXNhcGkgPSBhd2FpdCDmlbTnkIbkvJjpgInliJfooagoYWRkcmVzc2VzYXBpKTsKCQkJY29uc3QgbmV3QWRkcmVzc2VzY3N2ID0gYXdhaXQg5pW055CG5rWL6YCf57uT5p6cKCdUUlVFJyk7CgkJCWNvbnN0IHVuaXF1ZUFkZHJlc3NlcyA9IEFycmF5LmZyb20obmV3IFNldChhZGRyZXNzZXMuY29uY2F0KG5ld0FkZHJlc3Nlc2FwaSwgbmV3QWRkcmVzc2VzY3N2KS5maWx0ZXIoaXRlbSA9PiBpdGVtICYmIGl0ZW0udHJpbSgpKSkpOwoKCQkJbGV0IG5vdGxzcmVzcG9uc2VCb2R5OwoJCQlpZiAoKG5vVExTID09ICd0cnVlJyAmJiDljY/orq7nsbvlnosgPT0gYXRvYihgXHUwMDU2XHUwMDZiXHUwMDc4XHUwMDQ2XHUwMDU1XHUwMDMxXHUwMDRkXHUwMDNkYCkpIHx8IOWNj+iuruexu+WeiyA9PSAnVk1lc3MnKSB7CgkJCQljb25zdCBuZXdBZGRyZXNzZXNub3Rsc2FwaSA9IGF3YWl0IOaVtOeQhuS8mOmAieWIl+ihqChhZGRyZXNzZXNub3Rsc2FwaSk7CgkJCQljb25zdCBuZXdBZGRyZXNzZXNub3Rsc2NzdiA9IGF3YWl0IOaVtOeQhua1i+mAn+e7k+aenCgnRkFMU0UnKTsKCQkJCWNvbnN0IHVuaXF1ZUFkZHJlc3Nlc25vdGxzID0gQXJyYXkuZnJvbShuZXcgU2V0KGFkZHJlc3Nlc25vdGxzLmNvbmNhdChuZXdBZGRyZXNzZXNub3Rsc2FwaSwgbmV3QWRkcmVzc2Vzbm90bHNjc3YpLmZpbHRlcihpdGVtID0+IGl0ZW0gJiYgaXRlbS50cmltKCkpKSk7CgoJCQkJbm90bHNyZXNwb25zZUJvZHkgPSB1bmlxdWVBZGRyZXNzZXNub3Rscy5tYXAoYWRkcmVzcyA9PiB7CgkJCQkJbGV0IHBvcnQgPSAiLTEiOwoJCQkJCWxldCBhZGRyZXNzaWQgPSBhZGRyZXNzOwoKCQkJCQljb25zdCBtYXRjaCA9IGFkZHJlc3NpZC5tYXRjaChyZWdleCk7CgkJCQkJaWYgKCFtYXRjaCkgewoJCQkJCQlpZiAoYWRkcmVzcy5pbmNsdWRlcygnOicpICYmIGFkZHJlc3MuaW5jbHVkZXMoJyMnKSkgewoJCQkJCQkJY29uc3QgcGFydHMgPSBhZGRyZXNzLnNwbGl0KCc6Jyk7CgkJCQkJCQlhZGRyZXNzID0gcGFydHNbMF07CgkJCQkJCQljb25zdCBzdWJQYXJ0cyA9IHBhcnRzWzFdLnNwbGl0KCcjJyk7CgkJCQkJCQlwb3J0ID0gc3ViUGFydHNbMF07CgkJCQkJCQlhZGRyZXNzaWQgPSBzdWJQYXJ0c1sxXTsKCQkJCQkJfSBlbHNlIGlmIChhZGRyZXNzLmluY2x1ZGVzKCc6JykpIHsKCQkJCQkJCWNvbnN0IHBhcnRzID0gYWRkcmVzcy5zcGxpdCgnOicpOwoJCQkJCQkJYWRkcmVzcyA9IHBhcnRzWzBdOwoJCQkJCQkJcG9ydCA9IHBhcnRzWzFdOwoJCQkJCQl9IGVsc2UgaWYgKGFkZHJlc3MuaW5jbHVkZXMoJyMnKSkgewoJCQkJCQkJY29uc3QgcGFydHMgPSBhZGRyZXNzLnNwbGl0KCcjJyk7CgkJCQkJCQlhZGRyZXNzID0gcGFydHNbMF07CgkJCQkJCQlhZGRyZXNzaWQgPSBwYXJ0c1sxXTsKCQkJCQkJfQoKCQkJCQkJaWYgKGFkZHJlc3NpZC5pbmNsdWRlcygnOicpKSB7CgkJCQkJCQlhZGRyZXNzaWQgPSBhZGRyZXNzaWQuc3BsaXQoJzonKVswXTsKCQkJCQkJfQoJCQkJCX0gZWxzZSB7CgkJCQkJCWFkZHJlc3MgPSBtYXRjaFsxXTsKCQkJCQkJcG9ydCA9IG1hdGNoWzJdIHx8IHBvcnQ7CgkJCQkJCWFkZHJlc3NpZCA9IG1hdGNoWzNdIHx8IGFkZHJlc3M7CgkJCQkJfQoKCQkJCQljb25zdCBodHRwUG9ydHMgPSBbIjgwODAiLCAiODg4MCIsICIyMDUyIiwgIjIwODIiLCAiMjA4NiIsICIyMDk1Il07CgkJCQkJaWYgKCFpc1ZhbGlkSVB2NChhZGRyZXNzKSAmJiBwb3J0ID09ICItMSIpIHsKCQkJCQkJZm9yIChsZXQgaHR0cFBvcnQgb2YgaHR0cFBvcnRzKSB7CgkJCQkJCQlpZiAoYWRkcmVzcy5pbmNsdWRlcyhodHRwUG9ydCkpIHsKCQkJCQkJCQlwb3J0ID0gaHR0cFBvcnQ7CgkJCQkJCQkJYnJlYWs7CgkJCQkJCQl9CgkJCQkJCX0KCQkJCQl9CgkJCQkJaWYgKHBvcnQgPT0gIi0xIikgcG9ydCA9ICI4MCI7CgkJCQkJLy9jb25zb2xlLmxvZyhhZGRyZXNzLCBwb3J0LCBhZGRyZXNzaWQpOwoKCQkJCQlpZiAo6Zqn6YGT54mI5pys5L2c6ICFLnRyaW0oKSA9PT0gYXRvYignWTIxc2FYVT0nKSAmJiDojrflj5bku6PnkIZJUC50cmltKCkgPT09ICd0cnVlJykgewoJCQkJCQkvLyDlsIZhZGRyZXNzaWTovazmjaLkuLrlsI/lhpkKCQkJCQkJbGV0IGxvd2VyQWRkcmVzc2lkID0gYWRkcmVzc2lkLnRvTG93ZXJDYXNlKCk7CgkJCQkJCS8vIOWIneWni+WMluaJvuWIsOeahHByb3h5SVDkuLpudWxsCgkJCQkJCWxldCBmb3VuZFByb3h5SVAgPSBudWxsOwoKCQkJCQkJaWYgKHNvY2tzNURhdGEpIHsKCQkJCQkJCWNvbnN0IHNvY2tzNSA9IGdldFJhbmRvbVByb3h5QnlNYXRjaChsb3dlckFkZHJlc3NpZCwgc29ja3M1RGF0YSk7CgkJCQkJCQlwYXRoID0gYC8ke3NvY2tzNX1gOwoJCQkJCQl9IGVsc2UgewoJCQkJCQkJLy8g6YGN5Y6G5Yy56YWNUFJPWFlJUOaVsOe7hOafpeaJvuWMuemFjemhuQoJCQkJCQkJZm9yIChsZXQgaXRlbSBvZiDljLnphY1QUk9YWUlQKSB7CgkJCQkJCQkJaWYgKGl0ZW0uaW5jbHVkZXMoJyMnKSAmJiBpdGVtLnNwbGl0KCcjJylbMV0gJiYgbG93ZXJBZGRyZXNzaWQuaW5jbHVkZXMoaXRlbS5zcGxpdCgnIycpWzFdLnRvTG93ZXJDYXNlKCkpKSB7CgkJCQkJCQkJCWZvdW5kUHJveHlJUCA9IGl0ZW0uc3BsaXQoJyMnKVswXTsKCQkJCQkJCQkJYnJlYWs7IC8vIOaJvuWIsOWMuemFjemhue+8jOi3s+WHuuW+queOrwoJCQkJCQkJCX0gZWxzZSBpZiAoaXRlbS5pbmNsdWRlcygnOicpICYmIGl0ZW0uc3BsaXQoJzonKVsxXSAmJiBsb3dlckFkZHJlc3NpZC5pbmNsdWRlcyhpdGVtLnNwbGl0KCc6JylbMV0udG9Mb3dlckNhc2UoKSkpIHsKCQkJCQkJCQkJZm91bmRQcm94eUlQID0gaXRlbS5zcGxpdCgnOicpWzBdOwoJCQkJCQkJCQlicmVhazsgLy8g5om+5Yiw5Yy56YWN6aG577yM6Lez5Ye65b6q546vCgkJCQkJCQkJfQoJCQkJCQkJfQoKCQkJCQkJCWlmIChmb3VuZFByb3h5SVApIHsKCQkJCQkJCQkvLyDlpoLmnpzmib7liLDljLnphY3nmoRwcm94eUlQ77yM6LWL5YC857uZcGF0aAoJCQkJCQkJCXBhdGggPSBhdG9iKCdMM0J5YjNoNWFYQTknKSArIGZvdW5kUHJveHlJUDsKCQkJCQkJCX0gZWxzZSB7CgkJCQkJCQkJLy8g5aaC5p6c5rKh5pyJ5om+5Yiw5Yy56YWN6aG577yM6ZqP5py66YCJ5oup5LiA5LiqcHJveHlJUAoJCQkJCQkJCWNvbnN0IHJhbmRvbVByb3h5SVAgPSBwcm94eUlQc1tNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKiBwcm94eUlQcy5sZW5ndGgpXTsKCQkJCQkJCQlwYXRoID0gYXRvYignTDNCeWIzaDVhWEE5JykgKyByYW5kb21Qcm94eUlQOwoJCQkJCQkJfQoJCQkJCQl9CgkJCQkJfQoKCQkJCQlpZiAo5Y2P6K6u57G75Z6LID09ICdWTWVzcycpIHsKCQkJCQkJY29uc3Qgdm1lc3NMaW5rID0gYHZtZXNzOi8vJHt1dGY4VG9CYXNlNjQoYHsidiI6IjIiLCJwcyI6IiR7YWRkcmVzc2lkICsgRW5kUFN9IiwiYWRkIjoiJHthZGRyZXNzfSIsInBvcnQiOiIke3BvcnR9IiwiaWQiOiIke3V1aWR9IiwiYWlkIjoiJHvpop3lpJZJRH0iLCJzY3kiOiIke+WKoOWvhuaWueW8j30iLCJuZXQiOiJ3cyIsInR5cGUiOiIke3R5cGV9IiwiaG9zdCI6IiR7aG9zdH0iLCJwYXRoIjoiJHtwYXRofSIsInRscyI6IiIsInNuaSI6IiIsImFscG4iOiIke2VuY29kZVVSSUNvbXBvbmVudChhbHBuKX0iLCJmcCI6IiJ9YCl9YDsKCQkJCQkJcmV0dXJuIHZtZXNzTGluazsKCQkJCQl9IGVsc2UgewoJCQkJCQljb25zdCDkuLrng4jlo6tMaW5rID0gYCR7YXRvYignZG14bGMzTTZMeTg9JykgKyB1dWlkfUAke2FkZHJlc3N9OiR7cG9ydCArIGF0b2IoJ1AyVnVZM0o1Y0hScGIyNDlibTl1WlNaelpXTjFjbWwwZVQwbWRIbHdaVDA9JykgKyB0eXBlfSZob3N0PSR7aG9zdH0mcGF0aD0ke2VuY29kZVVSSUNvbXBvbmVudChwYXRoKX0jJHtlbmNvZGVVUklDb21wb25lbnQoYWRkcmVzc2lkICsgRW5kUFMpfWA7CgkJCQkJCXJldHVybiDkuLrng4jlo6tMaW5rOwoJCQkJCX0KCgkJCQl9KS5qb2luKCdcbicpOwoJCQl9CgoJCQljb25zdCByZXNwb25zZUJvZHkgPSB1bmlxdWVBZGRyZXNzZXMubWFwKGFkZHJlc3MgPT4gewoJCQkJbGV0IHBvcnQgPSAiLTEiOwoJCQkJbGV0IGFkZHJlc3NpZCA9IGFkZHJlc3M7CgoJCQkJY29uc3QgbWF0Y2ggPSBhZGRyZXNzaWQubWF0Y2gocmVnZXgpOwoJCQkJaWYgKCFtYXRjaCkgewoJCQkJCWlmIChhZGRyZXNzLmluY2x1ZGVzKCc6JykgJiYgYWRkcmVzcy5pbmNsdWRlcygnIycpKSB7CgkJCQkJCWNvbnN0IHBhcnRzID0gYWRkcmVzcy5zcGxpdCgnOicpOwoJCQkJCQlhZGRyZXNzID0gcGFydHNbMF07CgkJCQkJCWNvbnN0IHN1YlBhcnRzID0gcGFydHNbMV0uc3BsaXQoJyMnKTsKCQkJCQkJcG9ydCA9IHN1YlBhcnRzWzBdOwoJCQkJCQlhZGRyZXNzaWQgPSBzdWJQYXJ0c1sxXTsKCQkJCQl9IGVsc2UgaWYgKGFkZHJlc3MuaW5jbHVkZXMoJzonKSkgewoJCQkJCQljb25zdCBwYXJ0cyA9IGFkZHJlc3Muc3BsaXQoJzonKTsKCQkJCQkJYWRkcmVzcyA9IHBhcnRzWzBdOwoJCQkJCQlwb3J0ID0gcGFydHNbMV07CgkJCQkJfSBlbHNlIGlmIChhZGRyZXNzLmluY2x1ZGVzKCcjJykpIHsKCQkJCQkJY29uc3QgcGFydHMgPSBhZGRyZXNzLnNwbGl0KCcjJyk7CgkJCQkJCWFkZHJlc3MgPSBwYXJ0c1swXTsKCQkJCQkJYWRkcmVzc2lkID0gcGFydHNbMV07CgkJCQkJfQoKCQkJCQlpZiAoYWRkcmVzc2lkLmluY2x1ZGVzKCc6JykpIHsKCQkJCQkJYWRkcmVzc2lkID0gYWRkcmVzc2lkLnNwbGl0KCc6JylbMF07CgkJCQkJfQoJCQkJfSBlbHNlIHsKCQkJCQlhZGRyZXNzID0gbWF0Y2hbMV07CgkJCQkJcG9ydCA9IG1hdGNoWzJdIHx8IHBvcnQ7CgkJCQkJYWRkcmVzc2lkID0gbWF0Y2hbM10gfHwgYWRkcmVzczsKCQkJCX0KCgkJCQlpZiAoIWlzVmFsaWRJUHY0KGFkZHJlc3MpICYmIHBvcnQgPT0gIi0xIikgewoJCQkJCWZvciAobGV0IGh0dHBzUG9ydCBvZiBodHRwc1BvcnRzKSB7CgkJCQkJCWlmIChhZGRyZXNzLmluY2x1ZGVzKGh0dHBzUG9ydCkpIHsKCQkJCQkJCXBvcnQgPSBodHRwc1BvcnQ7CgkJCQkJCQlicmVhazsKCQkJCQkJfQoJCQkJCX0KCQkJCX0KCQkJCWlmIChwb3J0ID09ICItMSIpIHBvcnQgPSAiNDQzIjsKCgkJCQkvL2NvbnNvbGUubG9nKGFkZHJlc3MsIHBvcnQsIGFkZHJlc3NpZCk7CgoJCQkJaWYgKOmap+mBk+eJiOacrOS9nOiAhS50cmltKCkgPT09IGF0b2IoJ1kyMXNhWFU9JykgJiYg6I635Y+W5Luj55CGSVAudHJpbSgpID09PSAndHJ1ZScpIHsKCQkJCQkvLyDlsIZhZGRyZXNzaWTovazmjaLkuLrlsI/lhpkKCQkJCQlsZXQgbG93ZXJBZGRyZXNzaWQgPSBhZGRyZXNzaWQudG9Mb3dlckNhc2UoKTsKCQkJCQkvLyDliJ3lp4vljJbmib7liLDnmoRwcm94eUlQ5Li6bnVsbAoJCQkJCWxldCBmb3VuZFByb3h5SVAgPSBudWxsOwoKCQkJCQlpZiAoc29ja3M1RGF0YSkgewoJCQkJCQljb25zdCBzb2NrczUgPSBnZXRSYW5kb21Qcm94eUJ5TWF0Y2gobG93ZXJBZGRyZXNzaWQsIHNvY2tzNURhdGEpOwoJCQkJCQlwYXRoID0gYC8ke3NvY2tzNX1gOwoJCQkJCX0gZWxzZSB7CgkJCQkJCS8vIOmBjeWOhuWMuemFjVBST1hZSVDmlbDnu4Tmn6Xmib7ljLnphY3pobkKCQkJCQkJZm9yIChsZXQgaXRlbSBvZiDljLnphY1QUk9YWUlQKSB7CgkJCQkJCQlpZiAoaXRlbS5pbmNsdWRlcygnIycpICYmIGl0ZW0uc3BsaXQoJyMnKVsxXSAmJiBsb3dlckFkZHJlc3NpZC5pbmNsdWRlcyhpdGVtLnNwbGl0KCcjJylbMV0udG9Mb3dlckNhc2UoKSkpIHsKCQkJCQkJCQlmb3VuZFByb3h5SVAgPSBpdGVtLnNwbGl0KCcjJylbMF07CgkJCQkJCQkJYnJlYWs7IC8vIOaJvuWIsOWMuemFjemhue+8jOi3s+WHuuW+queOrwoJCQkJCQkJfSBlbHNlIGlmIChpdGVtLmluY2x1ZGVzKCc6JykgJiYgaXRlbS5zcGxpdCgnOicpWzFdICYmIGxvd2VyQWRkcmVzc2lkLmluY2x1ZGVzKGl0ZW0uc3BsaXQoJzonKVsxXS50b0xvd2VyQ2FzZSgpKSkgewoJCQkJCQkJCWZvdW5kUHJveHlJUCA9IGl0ZW0uc3BsaXQoJzonKVswXTsKCQkJCQkJCQlicmVhazsgLy8g5om+5Yiw5Yy56YWN6aG577yM6Lez5Ye65b6q546vCgkJCQkJCQl9CgkJCQkJCX0KCgkJCQkJCWNvbnN0IG1hdGNoaW5nUHJveHlJUCA9IHByb3h5SVBQb29sLmZpbmQocHJveHlJUCA9PiBwcm94eUlQLmluY2x1ZGVzKGFkZHJlc3MpKTsKCQkJCQkJaWYgKG1hdGNoaW5nUHJveHlJUCkgewoJCQkJCQkJcGF0aCA9IGF0b2IoJ0wzQnliM2g1YVhBOScpICsgbWF0Y2hpbmdQcm94eUlQOwoJCQkJCQl9IGVsc2UgaWYgKGZvdW5kUHJveHlJUCkgewoJCQkJCQkJLy8g5aaC5p6c5om+5Yiw5Yy56YWN55qEcHJveHlJUO+8jOi1i+WAvOe7mXBhdGgKCQkJCQkJCXBhdGggPSBhdG9iKCdMM0J5YjNoNWFYQTknKSArIGZvdW5kUHJveHlJUDsKCQkJCQkJfSBlbHNlIHsKCQkJCQkJCS8vIOWmguaenOayoeacieaJvuWIsOWMuemFjemhue+8jOmaj+acuumAieaLqeS4gOS4qnByb3h5SVAKCQkJCQkJCWNvbnN0IHJhbmRvbVByb3h5SVAgPSBwcm94eUlQc1tNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKiBwcm94eUlQcy5sZW5ndGgpXTsKCQkJCQkJCXBhdGggPSBhdG9iKCdMM0J5YjNoNWFYQTknKSArIHJhbmRvbVByb3h5SVA7CgkJCQkJCX0KCQkJCQl9CgkJCQl9CgoJCQkJbGV0IOS8quijheWfn+WQjSA9IGhvc3Q7CgkJCQlsZXQg5pyA57uI6Lev5b6EID0gcGF0aDsKCQkJCWxldCDoioLngrnlpIfms6ggPSBFbmRQUzsKCQkJCWlmICjkuLTml7bkuK3ovazln5/lkI0ubGVuZ3RoID4gMCAmJiAoaG9zdC5pbmNsdWRlcygnLndvcmtlcnMuZGV2JykpKSB7CgkJCQkJ5pyA57uI6Lev5b6EID0gYC8ke2hvc3R9JHtwYXRofWA7CgkJCQkJ5Lyq6KOF5Z+f5ZCNID0g5Li05pe25Lit6L2s5Z+f5ZCNW01hdGguZmxvb3IoTWF0aC5yYW5kb20oKSAqIOS4tOaXtuS4rei9rOWfn+WQjS5sZW5ndGgpXTsKCQkJCQnoioLngrnlpIfms6ggPSBFbmRQUyArIGF0b2IoJ0lPVzNzdVdRcitlVXFPUzR0T2FYdHVXZm4rV1FqZVM0cmVpOXJPYWNqZVdLb2UrOGpPaXZ0K1d3dmVXL3ErZTdrZVd1bXVpSHF1V3VtdVM1aWVXZm4rKzhnUT09Jyk7CgkJCQkJc25pID0g5Lyq6KOF5Z+f5ZCNOwoJCQkJfQoKCQkJCWlmICjljY/orq7nsbvlnosgPT0gJ1ZNZXNzJykgewoJCQkJCWNvbnN0IHZtZXNzTGluayA9IGB2bWVzczovLyR7dXRmOFRvQmFzZTY0KGB7InYiOiIyIiwicHMiOiIke2FkZHJlc3NpZCArIOiKgueCueWkh+azqH0iLCJhZGQiOiIke2FkZHJlc3N9IiwicG9ydCI6IiR7cG9ydH0iLCJpZCI6IiR7dXVpZH0iLCJhaWQiOiIke+mineWklklEfSIsInNjeSI6IiR75Yqg5a+G5pa55byPfSIsIm5ldCI6IndzIiwidHlwZSI6IiR7dHlwZX0iLCJob3N0IjoiJHvkvKroo4Xln5/lkI19IiwicGF0aCI6IiR75pyA57uI6Lev5b6EfSIsInRscyI6InRscyIsInNuaSI6IiR7c25pfSIsImFscG4iOiIke2VuY29kZVVSSUNvbXBvbmVudChhbHBuKX0iLCJmcCI6IiIsImFsbG93SW5zZWN1cmUiOiIxIiwiZnJhZ21lbnQiOiIxLDQwLTYwLDMwLTUwLHRsc2hlbGxvIn1gKX1gOwoJCQkJCXJldHVybiB2bWVzc0xpbms7CgkJCQl9IGVsc2UgaWYgKOWNj+iuruexu+WeiyA9PSBhdG9iKCdWSEp2YW1GdScpKSB7CgkJCQkJY29uc3Qg54m55rSb5LyKTGluayA9IGAke2F0b2IoJ2RISnZhbUZ1T2k4dicpICsgdXVpZH1AJHthZGRyZXNzfToke3BvcnQgKyBhdG9iKCdQM05sWTNWeWFYUjVQWFJzY3laemJtazknKSArIHNuaX0mYWxwbj0ke2VuY29kZVVSSUNvbXBvbmVudChhbHBuKX0mZnA9cmFuZG9taXplZCZ0eXBlPSR7dHlwZX0maG9zdD0ke+S8quijheWfn+WQjX0mcGF0aD0ke2VuY29kZVVSSUNvbXBvbmVudCjmnIDnu4jot6/lvoQpfSZhbGxvd0luc2VjdXJlPTEmZnJhZ21lbnQ9JHtlbmNvZGVVUklDb21wb25lbnQoJzEsNDAtNjAsMzAtNTAsdGxzaGVsbG8nKX0jJHtlbmNvZGVVUklDb21wb25lbnQoYWRkcmVzc2lkICsg6IqC54K55aSH5rOoKX1gOwoJCQkJCXJldHVybiDnibnmtJvkvIpMaW5rOwoJCQkJfSBlbHNlIHsKCQkJCQljb25zdCDkuLrng4jlo6tMaW5rID0gYCR7YXRvYignZG14bGMzTTZMeTg9JykgKyB1dWlkfUAke2FkZHJlc3N9OiR7cG9ydCArIGF0b2IoJ1AyVnVZM0o1Y0hScGIyNDlibTl1WlNaelpXTjFjbWwwZVQxMGJITW1jMjVwUFE9PScpICsgc25pfSZhbHBuPSR7ZW5jb2RlVVJJQ29tcG9uZW50KGFscG4pfSZmcD1yYW5kb20mdHlwZT0ke3R5cGV9Jmhvc3Q9JHvkvKroo4Xln5/lkI19JnBhdGg9JHtlbmNvZGVVUklDb21wb25lbnQo5pyA57uI6Lev5b6EKSArIHhodHRwfSZhbGxvd0luc2VjdXJlPTEmZnJhZ21lbnQ9JHtlbmNvZGVVUklDb21wb25lbnQoJzEsNDAtNjAsMzAtNTAsdGxzaGVsbG8nKX0jJHtlbmNvZGVVUklDb21wb25lbnQoYWRkcmVzc2lkICsg6IqC54K55aSH5rOoKX1gOwoJCQkJCXJldHVybiDkuLrng4jlo6tMaW5rOwoJCQkJfQoKCQkJfSkuam9pbignXG4nKTsKCgkJCWxldCBjb21iaW5lZENvbnRlbnQgPSByZXNwb25zZUJvZHk7IC8vIOWQiOW5tuWGheWuuQoKCQkJaWYgKGxpbmspIHsKCQkJCWNvbnN0IGxpbmtzID0gYXdhaXQg5pW055CGKGxpbmspOwoJCQkJY29uc3Qg5pW055CG6IqC54K5TElOSyA9IChhd2FpdCBnZXRMaW5rKGxpbmtzKSkuam9pbignXG4nKTsKCQkJCWNvbWJpbmVkQ29udGVudCArPSAnXG4nICsg5pW055CG6IqC54K5TElOSzsKCQkJCWNvbnNvbGUubG9nKCJsaW5rOiAiICsg5pW055CG6IqC54K5TElOSykKCQkJfQoKCQkJaWYgKG5vdGxzcmVzcG9uc2VCb2R5ICYmIG5vVExTID09ICd0cnVlJykgewoJCQkJY29tYmluZWRDb250ZW50ICs9ICdcbicgKyBub3Rsc3Jlc3BvbnNlQm9keTsKCQkJCWNvbnNvbGUubG9nKCJub3Rsc3Jlc3BvbnNlQm9keTogIiArIG5vdGxzcmVzcG9uc2VCb2R5KTsKCQkJfQoKCQkJaWYgKOWNj+iuruexu+WeiyA9PSBhdG9iKCdWSEp2YW1GdScpICYmICh1c2VyQWdlbnQuaW5jbHVkZXMoJ3N1cmdlJykgfHwgKGZvcm1hdCA9PT0gJ3N1cmdlJyAmJiAhdXNlckFnZW50LmluY2x1ZGVzKCdzdWJjb252ZXJ0ZXInKSkpICYmICF1c2VyQWdlbnQuaW5jbHVkZXMoJ2NmLXdvcmtlcnMtc3ViJykpIHsKCQkJCWNvbnN0IOeJuea0m+S8ikxpbmtzID0gY29tYmluZWRDb250ZW50LnNwbGl0KCdcbicpOwoJCQkJY29uc3Qg54m55rSb5LyKTGlua3NKOCA9IGdlbmVyYXRlRmFrZUluZm8o54m55rSb5LyKTGlua3Muam9pbignfCcpLCB1dWlkLCBob3N0KTsKCQkJCXN1YkNvbnZlcnRlclVybCA9IGAke3N1YlByb3RvY29sfTovLyR7c3ViQ29udmVydGVyfS9zdWI/dGFyZ2V0PXN1cmdlJnZlcj00JnVybD0ke2VuY29kZVVSSUNvbXBvbmVudCjnibnmtJvkvIpMaW5rc0o4KX0maW5zZXJ0PWZhbHNlJmNvbmZpZz0ke2VuY29kZVVSSUNvbXBvbmVudChzdWJDb25maWcpfSZlbW9qaT10cnVlJmxpc3Q9ZmFsc2UmeHVkcD1mYWxzZSZ1ZHA9ZmFsc2UmdGZvPWZhbHNlJmV4cGFuZD10cnVlJnNjdj10cnVlJmZkbj1mYWxzZWA7CgkJCX0gZWxzZSB7CgkJCQlsZXQgYmFzZTY0UmVzcG9uc2U7CgkJCQl0cnkgewoJCQkJCWJhc2U2NFJlc3BvbnNlID0gYnRvYShjb21iaW5lZENvbnRlbnQpOyAvLyDph43mlrDov5vooYwgQmFzZTY0IOe8lueggQoJCQkJfSBjYXRjaCAoZSkgewoJCQkJCWZ1bmN0aW9uIGVuY29kZUJhc2U2NChkYXRhKSB7CgkJCQkJCWNvbnN0IGJpbmFyeSA9IG5ldyBUZXh0RW5jb2RlcigpLmVuY29kZShkYXRhKTsKCQkJCQkJbGV0IGJhc2U2NCA9ICcnOwoJCQkJCQljb25zdCBjaGFycyA9ICdBQkNERUZHSElKS0xNTk9QUVJTVFVWV1hZWmFiY2RlZmdoaWprbG1ub3BxcnN0dXZ3eHl6MDEyMzQ1Njc4OSsvJzsKCgkJCQkJCWZvciAobGV0IGkgPSAwOyBpIDwgYmluYXJ5Lmxlbmd0aDsgaSArPSAzKSB7CgkJCQkJCQljb25zdCBieXRlMSA9IGJpbmFyeVtpXTsKCQkJCQkJCWNvbnN0IGJ5dGUyID0gYmluYXJ5W2kgKyAxXSB8fCAwOwoJCQkJCQkJY29uc3QgYnl0ZTMgPSBiaW5hcnlbaSArIDJdIHx8IDA7CgoJCQkJCQkJYmFzZTY0ICs9IGNoYXJzW2J5dGUxID4+IDJdOwoJCQkJCQkJYmFzZTY0ICs9IGNoYXJzWygoYnl0ZTEgJiAzKSA8PCA0KSB8IChieXRlMiA+PiA0KV07CgkJCQkJCQliYXNlNjQgKz0gY2hhcnNbKChieXRlMiAmIDE1KSA8PCAyKSB8IChieXRlMyA+PiA2KV07CgkJCQkJCQliYXNlNjQgKz0gY2hhcnNbYnl0ZTMgJiA2M107CgkJCQkJCX0KCgkJCQkJCWNvbnN0IHBhZGRpbmcgPSAzIC0gKGJpbmFyeS5sZW5ndGggJSAzIHx8IDMpOwoJCQkJCQlyZXR1cm4gYmFzZTY0LnNsaWNlKDAsIGJhc2U2NC5sZW5ndGggLSBwYWRkaW5nKSArICc9PScuc2xpY2UoMCwgcGFkZGluZyk7CgkJCQkJfQoJCQkJCWJhc2U2NFJlc3BvbnNlID0gZW5jb2RlQmFzZTY0KGNvbWJpbmVkQ29udGVudCk7CgkJCQl9CgkJCQljb25zdCByZXNwb25zZSA9IG5ldyBSZXNwb25zZShiYXNlNjRSZXNwb25zZSwgeyBoZWFkZXJzOiByZXNwb25zZUhlYWRlcnMgfSk7CgkJCQlyZXR1cm4gcmVzcG9uc2U7CgkJCX0KCQl9CgoJCXRyeSB7CgkJCWNvbnN0IHN1YkNvbnZlcnRlclJlc3BvbnNlID0gYXdhaXQgZmV0Y2goc3ViQ29udmVydGVyVXJsKTsKCgkJCWlmICghc3ViQ29udmVydGVyUmVzcG9uc2Uub2spIHsKCQkJCXRocm93IG5ldyBFcnJvcihgRXJyb3IgZmV0Y2hpbmcgc3ViQ29udmVydGVyVXJsOiAke3N1YkNvbnZlcnRlclJlc3BvbnNlLnN0YXR1c30gJHtzdWJDb252ZXJ0ZXJSZXNwb25zZS5zdGF0dXNUZXh0fWApOwoJCQl9CgoJCQlsZXQgc3ViQ29udmVydGVyQ29udGVudCA9IGF3YWl0IHN1YkNvbnZlcnRlclJlc3BvbnNlLnRleHQoKTsKCgkJCWlmICjljY/orq7nsbvlnosgPT0gYXRvYignVkhKdmFtRnUnKSAmJiAodXNlckFnZW50LmluY2x1ZGVzKCdzdXJnZScpIHx8IChmb3JtYXQgPT09ICdzdXJnZScgJiYgIXVzZXJBZ2VudC5pbmNsdWRlcygnc3ViY29udmVydGVyJykpKSAmJiAhdXNlckFnZW50LmluY2x1ZGVzKCdjZi13b3JrZXJzLXN1YicpKSB7CgkJCQlzdWJDb252ZXJ0ZXJDb250ZW50ID0gc3VyZ2Uoc3ViQ29udmVydGVyQ29udGVudCwgaG9zdCwgcGF0aCk7CgkJCX0KCQkJc3ViQ29udmVydGVyQ29udGVudCA9IHJldmVydEZha2VJbmZvKHN1YkNvbnZlcnRlckNvbnRlbnQsIHV1aWQsIGhvc3QpOwoJCQlpZiAoIXVzZXJBZ2VudC5pbmNsdWRlcygnbW96aWxsYScpKSByZXNwb25zZUhlYWRlcnNbIkNvbnRlbnQtRGlzcG9zaXRpb24iXSA9IGBhdHRhY2htZW50OyBmaWxlbmFtZSo9dXRmLTgnJyR7ZW5jb2RlVVJJQ29tcG9uZW50KEZpbGVOYW1lKX1gOwoJCQlyZXR1cm4gbmV3IFJlc3BvbnNlKHN1YkNvbnZlcnRlckNvbnRlbnQsIHsgaGVhZGVyczogcmVzcG9uc2VIZWFkZXJzIH0pOwoJCX0gY2F0Y2ggKGVycm9yKSB7CgkJCXJldHVybiBuZXcgUmVzcG9uc2UoYEVycm9yOiAke2Vycm9yLm1lc3NhZ2V9YCwgewoJCQkJc3RhdHVzOiA1MDAsCgkJCQloZWFkZXJzOiB7ICdjb250ZW50LXR5cGUnOiAndGV4dC9wbGFpbjsgY2hhcnNldD11dGYtOCcgfSwKCQkJfSk7CgkJfQoJfQp9OwoKYXN5bmMgZnVuY3Rpb24gc3ViSHRtbChyZXF1ZXN0KSB7Cgljb25zdCB1cmwgPSBuZXcgVVJMKHJlcXVlc3QudXJsKTsKCWNvbnN0IEhUTUwgPSBgCgkJCTwhRE9DVFlQRSBodG1sPgoJCQk8aHRtbD4KCQkJPGhlYWQ+CgkJCQk8bWV0YSBjaGFyc2V0PSJVVEYtOCI+CgkJCQk8bWV0YSBuYW1lPSJ2aWV3cG9ydCIgY29udGVudD0id2lkdGg9ZGV2aWNlLXdpZHRoLCBpbml0aWFsLXNjYWxlPTEuMCI+CgkJCQk8dGl0bGU+JHtGaWxlTmFtZX08L3RpdGxlPgoJCQkJJHvnvZHnq5nlm77moId9CgkJCQk8c3R5bGU+CgkJCQkJOnJvb3QgewoJCQkJCQktLXByaW1hcnktY29sb3I6ICM0MzYxZWU7CgkJCQkJCS0taG92ZXItY29sb3I6ICMzYjRmZDM7CgkJCQkJCS0tYmctY29sb3I6ICNmNWY2ZmE7CgkJCQkJCS0tY2FyZC1iZzogI2ZmZmZmZjsKCQkJCQl9CgkJCQkJCgkJCQkJKiB7CgkJCQkJCWJveC1zaXppbmc6IGJvcmRlci1ib3g7CgkJCQkJCW1hcmdpbjogMDsKCQkJCQkJcGFkZGluZzogMDsKCQkJCQl9CgkJCQkJCgkJCQkJYm9keSB7CgkJCQkJCSR7572R56uZ6IOM5pmvfQoJCQkJCQliYWNrZ3JvdW5kLXNpemU6IGNvdmVyOwoJCQkJCQliYWNrZ3JvdW5kLXBvc2l0aW9uOiBjZW50ZXI7CgkJCQkJCWJhY2tncm91bmQtYXR0YWNobWVudDogZml4ZWQ7CgkJCQkJCWJhY2tncm91bmQtY29sb3I6IHZhcigtLWJnLWNvbG9yKTsKCQkJCQkJZm9udC1mYW1pbHk6ICdTZWdvZSBVSScsIFRhaG9tYSwgR2VuZXZhLCBWZXJkYW5hLCBzYW5zLXNlcmlmOwoJCQkJCQlsaW5lLWhlaWdodDogMS42OwoJCQkJCQljb2xvcjogIzMzMzsKCQkJCQkJbWluLWhlaWdodDogMTAwdmg7CgkJCQkJCWRpc3BsYXk6IGZsZXg7CgkJCQkJCWp1c3RpZnktY29udGVudDogY2VudGVyOwoJCQkJCQlhbGlnbi1pdGVtczogY2VudGVyOwoJCQkJCX0KCQkJCQkKCQkJCQkuY29udGFpbmVyIHsKCQkJCQkJcG9zaXRpb246IHJlbGF0aXZlOwoJCQkJCQkvKiDkvb/nlKhyZ2Jh6K6+572u5Y2K6YCP5piO6IOM5pmvICovCgkJCQkJCWJhY2tncm91bmQ6IHJnYmEoMjU1LCAyNTUsIDI1NSwgMC43KTsKCQkJCQkJLyog5re75Yqg56Oo56CC546755KD5pWI5p6cICovCgkJCQkJCWJhY2tkcm9wLWZpbHRlcjogYmx1cigxMHB4KTsKCQkJCQkJLXdlYmtpdC1iYWNrZHJvcC1maWx0ZXI6IGJsdXIoMTBweCk7IC8qIFNhZmFyaeWFvOWuuSAqLwoJCQkJCQltYXgtd2lkdGg6IDYwMHB4OwoJCQkJCQl3aWR0aDogOTAlOwoJCQkJCQlwYWRkaW5nOiAycmVtOwoJCQkJCQlib3JkZXItcmFkaXVzOiAyMHB4OwoJCQkJCQkvKiDosIPmlbTpmLTlvbHmlYjmnpzlop7liqDpgJrpgI/mhJ8gKi8KCQkJCQkJYm94LXNoYWRvdzogMCAxMHB4IDIwcHggcmdiYSgwLDAsMCwwLjA1KSwKCQkJCQkJCQkJaW5zZXQgMCAwIDAgMXB4IHJnYmEoMjU1LCAyNTUsIDI1NSwgMC4xKTsKCQkJCQkJdHJhbnNpdGlvbjogdHJhbnNmb3JtIDAuM3MgZWFzZTsKCQkJCQl9CgoJCQkJCS8qIOiwg+aVtGhvdmVy5pWI5p6cICovCgkJCQkJLmNvbnRhaW5lcjpob3ZlciB7CgkJCQkJCXRyYW5zZm9ybTogdHJhbnNsYXRlWSgtNXB4KTsKCQkJCQkJYm94LXNoYWRvdzogMCAxNXB4IDMwcHggcmdiYSgwLDAsMCwwLjEpLAoJCQkJCQkJCQlpbnNldCAwIDAgMCAxcHggcmdiYSgyNTUsIDI1NSwgMjU1LCAwLjIpOwoJCQkJCX0KCQkJCQkKCQkJCQloMSB7CgkJCQkJCXRleHQtYWxpZ246IGNlbnRlcjsKCQkJCQkJY29sb3I6IHZhcigtLXByaW1hcnktY29sb3IpOwoJCQkJCQltYXJnaW4tYm90dG9tOiAycmVtOwoJCQkJCQlmb250LXNpemU6IDEuOHJlbTsKCQkJCQl9CgkJCQkJCgkJCQkJLmlucHV0LWdyb3VwIHsKCQkJCQkJbWFyZ2luLWJvdHRvbTogMS41cmVtOwoJCQkJCX0KCQkJCQkKCQkJCQlsYWJlbCB7CgkJCQkJCWRpc3BsYXk6IGJsb2NrOwoJCQkJCQltYXJnaW4tYm90dG9tOiAwLjVyZW07CgkJCQkJCWNvbG9yOiAjNTU1OwoJCQkJCQlmb250LXdlaWdodDogNTAwOwoJCQkJCX0KCQkJCQkKCQkJCQlpbnB1dCB7CgkJCQkJCXdpZHRoOiAxMDAlOwoJCQkJCQlwYWRkaW5nOiAxMnB4OwoJCQkJCQkvKiDkv67mlLnovrnmoYbpopzoibLku44gI2VlZSDliLDmm7Tmt7HnmoTpopzoibIgKi8KCQkJCQkJYm9yZGVyOiAycHggc29saWQgcmdiYSgwLCAwLCAwLCAwLjE1KTsgIC8qIOS9v+eUqHJnYmHlrp7njrDmm7Toh6rnhLbnmoTmt7HluqYgKi8KCQkJCQkJYm9yZGVyLXJhZGl1czogMTBweDsKCQkJCQkJZm9udC1zaXplOiAxcmVtOwoJCQkJCQl0cmFuc2l0aW9uOiBhbGwgMC4zcyBlYXNlOwoJCQkJCQkvKiDmt7vliqDovbvlvq7nmoTlhoXpmLTlvbHlop7lvLrovrnmoYbmlYjmnpwgKi8KCQkJCQkJYm94LXNoYWRvdzogaW5zZXQgMCAycHggNHB4IHJnYmEoMCwgMCwgMCwgMC4wMyk7CgkJCQkJfQoKCQkJCQlpbnB1dDpmb2N1cyB7CgkJCQkJCW91dGxpbmU6IG5vbmU7CgkJCQkJCWJvcmRlci1jb2xvcjogdmFyKC0tcHJpbWFyeS1jb2xvcik7CgkJCQkJCS8qIOWinuW8umZvY3Vz54q25oCB5LiL55qE6Zi05b2x5pWI5p6cICovCgkJCQkJCWJveC1zaGFkb3c6IDAgMCAwIDNweCByZ2JhKDY3LCA5NywgMjM4LCAwLjE1KSwKCQkJCQkJCQkJaW5zZXQgMCAycHggNHB4IHJnYmEoMCwgMCwgMCwgMC4wMyk7CgkJCQkJfQoJCQkJCQoJCQkJCWJ1dHRvbiB7CgkJCQkJCXdpZHRoOiAxMDAlOwoJCQkJCQlwYWRkaW5nOiAxMnB4OwoJCQkJCQliYWNrZ3JvdW5kLWNvbG9yOiB2YXIoLS1wcmltYXJ5LWNvbG9yKTsKCQkJCQkJY29sb3I6IHdoaXRlOwoJCQkJCQlib3JkZXI6IG5vbmU7CgkJCQkJCWJvcmRlci1yYWRpdXM6IDEwcHg7CgkJCQkJCWZvbnQtc2l6ZTogMXJlbTsKCQkJCQkJZm9udC13ZWlnaHQ6IDYwMDsKCQkJCQkJY3Vyc29yOiBwb2ludGVyOwoJCQkJCQl0cmFuc2l0aW9uOiBhbGwgMC4zcyBlYXNlOwoJCQkJCQltYXJnaW4tYm90dG9tOiAxLjVyZW07CgkJCQkJfQoJCQkJCQoJCQkJCWJ1dHRvbjpob3ZlciB7CgkJCQkJCWJhY2tncm91bmQtY29sb3I6IHZhcigtLWhvdmVyLWNvbG9yKTsKCQkJCQkJdHJhbnNmb3JtOiB0cmFuc2xhdGVZKC0ycHgpOwoJCQkJCX0KCQkJCQkKCQkJCQlidXR0b246YWN0aXZlIHsKCQkJCQkJdHJhbnNmb3JtOiB0cmFuc2xhdGVZKDApOwoJCQkJCX0KCQkJCQkKCQkJCQkjcmVzdWx0IHsKCQkJCQkJYmFja2dyb3VuZC1jb2xvcjogI2Y4ZjlmYTsKCQkJCQkJZm9udC1mYW1pbHk6IG1vbm9zcGFjZTsKCQkJCQkJd29yZC1icmVhazogYnJlYWstYWxsOwoJCQkJCX0KCgkJCQkJLmdpdGh1Yi1jb3JuZXIgc3ZnIHsKCQkJCQkJZmlsbDogdmFyKC0tcHJpbWFyeS1jb2xvcik7CgkJCQkJCWNvbG9yOiB2YXIoLS1jYXJkLWJnKTsKCQkJCQkJcG9zaXRpb246IGFic29sdXRlOwoJCQkJCQl0b3A6IDA7CgkJCQkJCXJpZ2h0OiAwOwoJCQkJCQlib3JkZXI6IDA7CgkJCQkJCXdpZHRoOiA4MHB4OwoJCQkJCQloZWlnaHQ6IDgwcHg7CgkJCQkJfQoKCQkJCQkuZ2l0aHViLWNvcm5lcjpob3ZlciAub2N0by1hcm0gewoJCQkJCQlhbmltYXRpb246IG9jdG9jYXQtd2F2ZSA1NjBtcyBlYXNlLWluLW91dDsKCQkJCQl9CgoJCQkJCUBrZXlmcmFtZXMgb2N0b2NhdC13YXZlIHsKCQkJCQkJMCUsIDEwMCUgeyB0cmFuc2Zvcm06IHJvdGF0ZSgwKSB9CgkJCQkJCTIwJSwgNjAlIHsgdHJhbnNmb3JtOiByb3RhdGUoLTI1ZGVnKSB9CgkJCQkJCTQwJSwgODAlIHsgdHJhbnNmb3JtOiByb3RhdGUoMTBkZWcpIH0KCQkJCQl9CgoJCQkJCUBrZXlmcmFtZXMgcm90YXRlIHsKCQkJCQkJZnJvbSB7IHRyYW5zZm9ybTogcm90YXRlKDBkZWcpOyB9CgkJCQkJCXRvIHsgdHJhbnNmb3JtOiByb3RhdGUoMzYwZGVnKTsgfQoJCQkJCX0KCgkJCQkJLmxvZ28tdGl0bGUgewoJCQkJCQlwb3NpdGlvbjogcmVsYXRpdmU7CgkJCQkJCWRpc3BsYXk6IGZsZXg7CgkJCQkJCWp1c3RpZnktY29udGVudDogY2VudGVyOwoJCQkJCQlhbGlnbi1pdGVtczogY2VudGVyOwoJCQkJCQltYXJnaW4tYm90dG9tOiAycmVtOwoJCQkJCX0KCgkJCQkJLmxvZ28td3JhcHBlciB7CgkJCQkJCXBvc2l0aW9uOiBhYnNvbHV0ZTsKCQkJCQkJbGVmdDogMDsKCQkJCQkJd2lkdGg6IDUwcHg7CgkJCQkJCWhlaWdodDogNTBweDsKCQkJCQl9CgoJCQkJCS5sb2dvLXRpdGxlIGltZyB7CgkJCQkJCXdpZHRoOiAxMDAlOwoJCQkJCQloZWlnaHQ6IDEwMCU7CgkJCQkJCWJvcmRlci1yYWRpdXM6IDUwJTsKCQkJCQkJcG9zaXRpb246IHJlbGF0aXZlOwoJCQkJCQl6LWluZGV4OiAxOwoJCQkJCQliYWNrZ3JvdW5kOiB2YXIoLS1jYXJkLWJnKTsKCQkJCQkJYm94LXNoYWRvdzogMCAwIDE1cHggcmdiYSg2NywgOTcsIDIzOCwgMC4xKTsKCQkJCQl9CgoJCQkJCS5sb2dvLWJvcmRlciB7CgkJCQkJCXBvc2l0aW9uOiBhYnNvbHV0ZTsKCQkJCQkJLyog5omp5aSn6L655qGG6IyD5Zu05Lul56Gu5L+d5a6M5YWo6KaG55uWICovCgkJCQkJCXRvcDogLTNweDsKCQkJCQkJbGVmdDogLTNweDsKCQkJCQkJcmlnaHQ6IC0zcHg7CgkJCQkJCWJvdHRvbTogLTNweDsKCQkJCQkJYm9yZGVyLXJhZGl1czogNTAlOwoJCQkJCQlhbmltYXRpb246IHJvdGF0ZSAzcyBsaW5lYXIgaW5maW5pdGU7CgkJCQkJCWJhY2tncm91bmQ6IGNvbmljLWdyYWRpZW50KAoJCQkJCQkJZnJvbSAwZGVnLAoJCQkJCQkJdHJhbnNwYXJlbnQgMCUsCgkJCQkJCQl2YXIoLS1wcmltYXJ5LWNvbG9yKSAyMCUsCgkJCQkJCQlyZ2JhKDY3LCA5NywgMjM4LCAwLjgpIDQwJSwKCQkJCQkJCXRyYW5zcGFyZW50IDYwJSwKCQkJCQkJCXRyYW5zcGFyZW50IDEwMCUKCQkJCQkJKTsKCQkJCQkJYm94LXNoYWRvdzogMCAwIDEwcHggcmdiYSg2NywgOTcsIDIzOCwgMC4zKTsKCQkJCQkJZmlsdGVyOiBibHVyKDAuNXB4KTsKCQkJCQl9CgoJCQkJCS5sb2dvLWJvcmRlcjo6YWZ0ZXIgewoJCQkJCQljb250ZW50OiAnJzsKCQkJCQkJcG9zaXRpb246IGFic29sdXRlOwoJCQkJCQkvKiDosIPmlbTlhoXlnIbpga7nvannmoTlpKflsI8gKi8KCQkJCQkJaW5zZXQ6IDNweDsKCQkJCQkJYm9yZGVyLXJhZGl1czogNTAlOwoJCQkJCQliYWNrZ3JvdW5kOiB2YXIoLS1jYXJkLWJnKTsKCQkJCQl9CgoJCQkJCUBrZXlmcmFtZXMgcm90YXRlIHsKCQkJCQkJZnJvbSB7IHRyYW5zZm9ybTogcm90YXRlKDBkZWcpOyB9CgkJCQkJCXRvIHsgdHJhbnNmb3JtOiByb3RhdGUoMzYwZGVnKTsgfQoJCQkJCX0KCgkJCQkJLmxvZ28tdGl0bGUgaDEgewoJCQkJCQltYXJnaW4tYm90dG9tOiAwOwoJCQkJCQl0ZXh0LWFsaWduOiBjZW50ZXI7CgkJCQkJfQoKCQkJCQlAbWVkaWEgKG1heC13aWR0aDogNDgwcHgpIHsKCQkJCQkJLmNvbnRhaW5lciB7CgkJCQkJCQlwYWRkaW5nOiAxLjVyZW07CgkJCQkJCX0KCQkJCQkJCgkJCQkJCWgxIHsKCQkJCQkJCWZvbnQtc2l6ZTogMS41cmVtOwoJCQkJCQl9CgoJCQkJCQkuZ2l0aHViLWNvcm5lcjpob3ZlciAub2N0by1hcm0gewoJCQkJCQkJYW5pbWF0aW9uOiBub25lOwoJCQkJCQl9CgkJCQkJCS5naXRodWItY29ybmVyIC5vY3RvLWFybSB7CgkJCQkJCQlhbmltYXRpb246IG9jdG9jYXQtd2F2ZSA1NjBtcyBlYXNlLWluLW91dDsKCQkJCQkJfQoKCQkJCQkJLmxvZ28td3JhcHBlciB7CgkJCQkJCQl3aWR0aDogNDBweDsKCQkJCQkJCWhlaWdodDogNDBweDsKCQkJCQkJfQoJCQkJCX0KCgkJCQkJLmJlaWFuLWluZm8gewoJCQkJCQl0ZXh0LWFsaWduOiBjZW50ZXI7CgkJCQkJCWZvbnQtc2l6ZTogMTNweDsKCQkJCQl9CgoJCQkJCS5iZWlhbi1pbmZvIGEgewoJCQkJCQljb2xvcjogdmFyKC0tcHJpbWFyeS1jb2xvcik7CgkJCQkJCXRleHQtZGVjb3JhdGlvbjogbm9uZTsKCQkJCQkJYm9yZGVyLWJvdHRvbTogMXB4IGRhc2hlZCB2YXIoLS1wcmltYXJ5LWNvbG9yKTsKCQkJCQkJcGFkZGluZy1ib3R0b206IDJweDsKCQkJCQl9CgoJCQkJCS5iZWlhbi1pbmZvIGE6aG92ZXIgewoJCQkJCQlib3JkZXItYm90dG9tLXN0eWxlOiBzb2xpZDsKCQkJCQl9CgoJCQkJCSNxcmNvZGUgewoJCQkJCQlkaXNwbGF5OiBmbGV4OwoJCQkJCQlqdXN0aWZ5LWNvbnRlbnQ6IGNlbnRlcjsKCQkJCQkJYWxpZ24taXRlbXM6IGNlbnRlcjsKCQkJCQkJbWFyZ2luLXRvcDogMjBweDsKCQkJCQl9CgoJCQkJCS5pbmZvLWljb24gewoJCQkJCQlkaXNwbGF5OiBpbmxpbmUtZmxleDsKCQkJCQkJYWxpZ24taXRlbXM6IGNlbnRlcjsKCQkJCQkJanVzdGlmeS1jb250ZW50OiBjZW50ZXI7CgkJCQkJCXdpZHRoOiAxOHB4OwoJCQkJCQloZWlnaHQ6IDE4cHg7CgkJCQkJCWJvcmRlci1yYWRpdXM6IDUwJTsKCQkJCQkJYmFja2dyb3VuZC1jb2xvcjogdmFyKC0tcHJpbWFyeS1jb2xvcik7CgkJCQkJCWNvbG9yOiB3aGl0ZTsKCQkJCQkJZm9udC1zaXplOiAxMnB4OwoJCQkJCQltYXJnaW4tbGVmdDogOHB4OwoJCQkJCQljdXJzb3I6IHBvaW50ZXI7CgkJCQkJCWZvbnQtd2VpZ2h0OiBib2xkOwoJCQkJCQlwb3NpdGlvbjogcmVsYXRpdmU7ICAgLyog5re75Yqg55u45a+55a6a5L2NICovCgkJCQkJCXRvcDogLTNweDsgICAgICAgICAgICAvKiDlvq7osIPlnoLnm7TkvY3nva4gKi8KCQkJCQl9CgoJCQkJCS5pbmZvLXRvb2x0aXAgewoJCQkJCQlkaXNwbGF5OiBub25lOwoJCQkJCQlwb3NpdGlvbjogZml4ZWQ7IC8qIOaUueS4uuWbuuWumuWumuS9jSAqLwoJCQkJCQliYWNrZ3JvdW5kOiB3aGl0ZTsKCQkJCQkJYm9yZGVyOiAxcHggc29saWQgdmFyKC0tcHJpbWFyeS1jb2xvcik7CgkJCQkJCWJvcmRlci1yYWRpdXM6IDhweDsKCQkJCQkJcGFkZGluZzogMTVweDsKCQkJCQkJei1pbmRleDogMTAwMDsKCQkJCQkJYm94LXNoYWRvdzogMCAycHggMTBweCByZ2JhKDAsMCwwLDAuMSk7CgkJCQkJCW1pbi13aWR0aDogMjAwcHg7CgkJCQkJCW1heC13aWR0aDogOTB2dzsgIC8qIOinhueql+WuveW6pueahDkwJSAqLwoJCQkJCQl3aWR0aDogbWF4LWNvbnRlbnQ7ICAvKiDmoLnmja7lhoXlrrnoh6rpgILlupTlrr3luqYgKi8KCQkJCQkJbGVmdDogNTAlOwoJCQkJCQl0b3A6IDUwJTsKCQkJCQkJdHJhbnNmb3JtOiB0cmFuc2xhdGUoLTUwJSwgLTUwJSk7IC8qIOWxheS4reWumuS9jSAqLwoJCQkJCQltYXJnaW46IDA7CgkJCQkJCWxpbmUtaGVpZ2h0OiAxLjY7CgkJCQkJCWZvbnQtc2l6ZTogMTNweDsKCQkJCQkJd2hpdGUtc3BhY2U6IG5vcm1hbDsKCQkJCQkJd29yZC13cmFwOiBicmVhay13b3JkOwoJCQkJCQlvdmVyZmxvdy13cmFwOiBicmVhay13b3JkOwoJCQkJCX0KCgkJCQkJLyog56e76Zmk5Y6f5p2l55qE566t5aS0ICovCgkJCQkJLmluZm8tdG9vbHRpcDo6YmVmb3JlIHsKCQkJCQkJZGlzcGxheTogbm9uZTsKCQkJCQl9CgkJCQk8L3N0eWxlPgoJCQkJPHNjcmlwdCBzcmM9Imh0dHBzOi8vY2RuLmpzZGVsaXZyLm5ldC9ucG0vQGtlZWV4L3FyY29kZWpzLWt4QDEuMC4yL3FyY29kZS5taW4uanMiPjwvc2NyaXB0PgoJCQk8L2hlYWQ+CgkJCTxib2R5PgoJCQkJPGEgaHJlZj0iJHthdG9iKCdhSFIwY0hNNkx5OW5hWFJvZFdJdVkyOXRMMk50YkdsMUwxZHZjbXRsY2xac1pYTnpNbk4xWWc9PScpfSIgdGFyZ2V0PSJfYmxhbmsiIGNsYXNzPSJnaXRodWItY29ybmVyIiBhcmlhLWxhYmVsPSJWaWV3IHNvdXJjZSBvbiBHaXRodWIiPgoJCQkJCTxzdmcgdmlld0JveD0iMCAwIDI1MCAyNTAiIGFyaWEtaGlkZGVuPSJ0cnVlIj4KCQkJCQkJPHBhdGggZD0iTTAsMCBMMTE1LDExNSBMMTMwLDExNSBMMTQyLDE0MiBMMjUwLDI1MCBMMjUwLDAgWiI+PC9wYXRoPgoJCQkJCQk8cGF0aCBkPSJNMTI4LjMsMTA5LjAgQzExMy44LDk5LjcgMTE5LjAsODkuNiAxMTkuMCw4OS42IEMxMjIuMCw4Mi43IDEyMC41LDc4LjYgMTIwLjUsNzguNiBDMTE5LjIsNzIuMCAxMjMuNCw3Ni4zIDEyMy40LDc2LjMgQzEyNy4zLDgwLjkgMTI1LjUsODcuMyAxMjUuNSw4Ny4zIEMxMjIuOSw5Ny42IDEzMC42LDEwMS45IDEzNC40LDEwMy4yIiBmaWxsPSJjdXJyZW50Q29sb3IiIHN0eWxlPSJ0cmFuc2Zvcm0tb3JpZ2luOiAxMzBweCAxMDZweDsiIGNsYXNzPSJvY3RvLWFybSI+PC9wYXRoPgoJCQkJCQk8cGF0aCBkPSJNMTE1LjAsMTE1LjAgQzExNC45LDExNS4xIDExOC43LDExNi41IDExOS44LDExNS40IEwxMzMuNywxMDEuNiBDMTM2LjksOTkuMiAxMzkuOSw5OC40IDE0Mi4yLDk4LjYgQzEzMy44LDg4LjAgMTI3LjUsNzQuNCAxNDMuOCw1OC4wIEMxNDguNSw1My40IDE1NC4wLDUxLjIgMTU5LjcsNTEuMCBDMTYwLjMsNDkuNCAxNjMuMiw0My42IDE3MS40LDQwLjEgQzE3MS40LDQwLjEgMTc2LjEsNDIuNSAxNzguOCw1Ni4yIEMxODMuMSw1OC42IDE4Ny4yLDYxLjggMTkwLjksNjUuNCBDMTk0LjUsNjkuMCAxOTcuNyw3My4yIDIwMC4xLDc3LjYgQzIxMy44LDgwLjIgMjE2LjMsODQuOSAyMTYuMyw4NC45IEMyMTIuNyw5My4xIDIwNi45LDk2LjAgMjA1LjQsOTYuNiBDMjA1LjEsMTAyLjQgMjAzLjAsMTA3LjggMTk4LjMsMTEyLjUgQzE4MS45LDEyOC45IDE2OC4zLDEyMi41IDE1Ny43LDExNC4xIEMxNTcuOSwxMTYuOSAxNTYuNywxMjAuOSAxNTIuNywxMjQuOSBMMTQxLjAsMTM2LjUgQzEzOS44LDEzNy43IDE0MS42LDE0MS45IDE0MS44LDE0MS44IFoiIGZpbGw9ImN1cnJlbnRDb2xvciIgY2xhc3M9Im9jdG8tYm9keSI+PC9wYXRoPgoJCQkJCTwvc3ZnPgoJCQkJPC9hPgoJCQkJPGRpdiBjbGFzcz0iY29udGFpbmVyIj4KCQkJCQkJPGRpdiBjbGFzcz0ibG9nby10aXRsZSI+CgkJCQkJCQkke+e9keermeWktOWDj30KCQkJCQkJCTxoMT4ke0ZpbGVOYW1lfTwvaDE+CgkJCQkJCTwvZGl2PgoJCQkJCTxkaXYgY2xhc3M9ImlucHV0LWdyb3VwIj4KCQkJCQkJPGxhYmVsIGZvcj0ibGluayI+6IqC54K56ZO+5o6lPC9sYWJlbD4KCQkJCQkJPGlucHV0IHR5cGU9InRleHQiIGlkPSJsaW5rIiBwbGFjZWhvbGRlcj0iJHtkZWNvZGVVUklDb21wb25lbnQoYXRvYignSlVVNEpVRkdKVUkzSlVVNEpVSkZKVGt6SlVVMUpUZzFKVUUxSlRJd1ZrMWxjM01sTWpBbE1rWWxNakJXVEVWVFV5VXlNQ1V5UmlVeU1GUnliMnBoYmlVeU1DVkZPU1U1TXlWQ1JTVkZOaVU0UlNWQk5RPT0nKSl9Ij4KCQkJCQk8L2Rpdj4KCQkJCQkKCQkJCQk8YnV0dG9uIG9uY2xpY2s9ImdlbmVyYXRlTGluaygpIj7nlJ/miJDkvJjpgInorqLpmIU8L2J1dHRvbj4KCQkJCQkKCQkJCQk8ZGl2IGNsYXNzPSJpbnB1dC1ncm91cCI+CgkJCQkJCTxkaXYgc3R5bGU9ImRpc3BsYXk6IGZsZXg7IGFsaWduLWl0ZW1zOiBjZW50ZXI7Ij4KCQkJCQkJCTxsYWJlbCBmb3I9InJlc3VsdCI+5LyY6YCJ6K6i6ZiFPC9sYWJlbD4KCQkJCQkJCTxkaXYgc3R5bGU9InBvc2l0aW9uOiByZWxhdGl2ZTsiPgoJCQkJCQkJCTxzcGFuIGNsYXNzPSJpbmZvLWljb24iIG9uY2xpY2s9InRvZ2dsZVRvb2x0aXAoZXZlbnQpIj4hPC9zcGFuPgoJCQkJCQkJCTxkaXYgY2xhc3M9ImluZm8tdG9vbHRpcCIgaWQ9ImluZm9Ub29sdGlwIj4KCQkJCQkJCQkJPHN0cm9uZz7lronlhajmj5DnpLo8L3N0cm9uZz7vvJrkvb/nlKjkvJjpgInorqLpmIXnlJ/miJDlmajml7bvvIzpnIDopoHmgqjmj5DkuqQgPHN0cm9uZz7oioLngrnphY3nva7kv6Hmga88L3N0cm9uZz4g55So5LqO55Sf5oiQ5LyY6YCJ6K6i6ZiF6ZO+5o6l44CC6L+Z5oSP5ZGz552A6K6i6ZiF5Zmo55qE57u05oqk6ICF5Y+v6IO95Lya6I635Y+W5Yiw6K+l6IqC54K55L+h5oGv44CCPHN0cm9uZz7or7foh6rooYzmlp/phYzkvb/nlKjpo47pmanjgII8L3N0cm9uZz48YnI+CgkJCQkJCQkJCTxicj4KCQkJCQkJCQkJ6K6i6ZiF6L2s5o2i5ZCO56uv77yaPHN0cm9uZz48YSBocmVmPScke3N1YlByb3RvY29sfTovLyR7c3ViQ29udmVydGVyfS92ZXJzaW9uJyB0YXJnZXQ9Il9ibGFuayIgcmVsPSJub29wZW5lciBub3JlZmVycmVyIj4ke3N1YlByb3RvY29sfTovLyR7c3ViQ29udmVydGVyfTwvYT48L3N0cm9uZz48YnI+CgkJCQkJCQkJCeiuoumYhei9rOaNoumFjee9ruaWh+S7tu+8mjxzdHJvbmc+PGEgaHJlZj0nJHtzdWJDb25maWd9JyB0YXJnZXQ9Il9ibGFuayIgcmVsPSJub29wZW5lciBub3JlZmVycmVyIj4ke3N1YkNvbmZpZ308L2E+PC9zdHJvbmc+CgkJCQkJCQkJPC9kaXY+CgkJCQkJCQk8L2Rpdj4KCQkJCQkJPC9kaXY+CgkJCQkJCTxpbnB1dCB0eXBlPSJ0ZXh0IiBpZD0icmVzdWx0IiByZWFkb25seSBvbmNsaWNrPSJjb3B5VG9DbGlwYm9hcmQoKSI+CgkJCQkJCTxsYWJlbCBpZD0icXJjb2RlIiBzdHlsZT0ibWFyZ2luOiAxNXB4IDEwcHggLTE1cHggMTBweDsiPjwvbGFiZWw+CgkJCQkJPC9kaXY+CgkJCQkJPGRpdiBjbGFzcz0iYmVpYW4taW5mbyIgc3R5bGU9InRleHQtYWxpZ246IGNlbnRlcjsgZm9udC1zaXplOiAxM3B4OyI+JHvnvZHnu5zlpIfmoYh9PC9kaXY+CgkJCQk8L2Rpdj4KCQoJCQkJPHNjcmlwdD4KCQkJCQlmdW5jdGlvbiB0b2dnbGVUb29sdGlwKGV2ZW50KSB7CgkJCQkJCWV2ZW50LnN0b3BQcm9wYWdhdGlvbigpOyAvLyDpmLvmraLkuovku7blhpLms6EKCQkJCQkJY29uc3QgdG9vbHRpcCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdpbmZvVG9vbHRpcCcpOwoJCQkJCQl0b29sdGlwLnN0eWxlLmRpc3BsYXkgPSB0b29sdGlwLnN0eWxlLmRpc3BsYXkgPT09ICdibG9jaycgPyAnbm9uZScgOiAnYmxvY2snOwoJCQkJCX0KCQkJCQkKCQkJCQkvLyDngrnlh7vpobXpnaLlhbbku5bljLrln5/lhbPpl63mj5DnpLrmoYYKCQkJCQlkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGZ1bmN0aW9uKGV2ZW50KSB7CgkJCQkJCWNvbnN0IHRvb2x0aXAgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnaW5mb1Rvb2x0aXAnKTsKCQkJCQkJY29uc3QgaW5mb0ljb24gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuaW5mby1pY29uJyk7CgkJCQkJCQoJCQkJCQlpZiAoIXRvb2x0aXAuY29udGFpbnMoZXZlbnQudGFyZ2V0KSAmJiAhaW5mb0ljb24uY29udGFpbnMoZXZlbnQudGFyZ2V0KSkgewoJCQkJCQkJdG9vbHRpcC5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnOwoJCQkJCQl9CgkJCQkJfSk7CgoJCQkJCWZ1bmN0aW9uIGNvcHlUb0NsaXBib2FyZCgpIHsKCQkJCQkJY29uc3QgcmVzdWx0SW5wdXQgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgncmVzdWx0Jyk7CgkJCQkJCWlmICghcmVzdWx0SW5wdXQudmFsdWUpIHsKCQkJCQkJCXJldHVybjsKCQkJCQkJfQoJCQkJCQkKCQkJCQkJcmVzdWx0SW5wdXQuc2VsZWN0KCk7CgkJCQkJCW5hdmlnYXRvci5jbGlwYm9hcmQud3JpdGVUZXh0KHJlc3VsdElucHV0LnZhbHVlKS50aGVuKCgpID0+IHsKCQkJCQkJCWNvbnN0IHRvb2x0aXAgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTsKCQkJCQkJCXRvb2x0aXAuc3R5bGUucG9zaXRpb24gPSAnZml4ZWQnOwoJCQkJCQkJdG9vbHRpcC5zdHlsZS5sZWZ0ID0gJzUwJSc7CgkJCQkJCQl0b29sdGlwLnN0eWxlLnRvcCA9ICcyMHB4JzsKCQkJCQkJCXRvb2x0aXAuc3R5bGUudHJhbnNmb3JtID0gJ3RyYW5zbGF0ZVgoLTUwJSknOwoJCQkJCQkJdG9vbHRpcC5zdHlsZS5wYWRkaW5nID0gJzhweCAxNnB4JzsKCQkJCQkJCXRvb2x0aXAuc3R5bGUuYmFja2dyb3VuZCA9ICcjNDM2MWVlJzsKCQkJCQkJCXRvb2x0aXAuc3R5bGUuY29sb3IgPSAnd2hpdGUnOwoJCQkJCQkJdG9vbHRpcC5zdHlsZS5ib3JkZXJSYWRpdXMgPSAnNHB4JzsKCQkJCQkJCXRvb2x0aXAuc3R5bGUuekluZGV4ID0gJzEwMDAnOwoJCQkJCQkJdG9vbHRpcC50ZXh0Q29udGVudCA9ICflt7LlpI3liLbliLDliarotLTmnb8nOwoJCQkJCQkJCgkJCQkJCQlkb2N1bWVudC5ib2R5LmFwcGVuZENoaWxkKHRvb2x0aXApOwoJCQkJCQkJCgkJCQkJCQlzZXRUaW1lb3V0KCgpID0+IHsKCQkJCQkJCQlkb2N1bWVudC5ib2R5LnJlbW92ZUNoaWxkKHRvb2x0aXApOwoJCQkJCQkJfSwgMjAwMCk7CgkJCQkJCX0pLmNhdGNoKGVyciA9PiB7CgkJCQkJCQlhbGVydCgn5aSN5Yi25aSx6LSl77yM6K+35omL5Yqo5aSN5Yi2Jyk7CgkJCQkJCX0pOwoJCQkJCX0KCQoJCQkJCWZ1bmN0aW9uIGdlbmVyYXRlTGluaygpIHsKCQkJCQkJY29uc3QgbGluayA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdsaW5rJykudmFsdWU7CgkJCQkJCWlmICghbGluaykgewoJCQkJCQkJYWxlcnQoJ+ivt+i+k+WFpeiKgueCuemTvuaOpScpOwoJCQkJCQkJcmV0dXJuOwoJCQkJCQl9CgkJCQkJCQoJCQkJCQlsZXQgdXVpZFR5cGUgPSAndXVpZCc7CgkJCQkJCWNvbnN0IGlzVHJvamFuID0gbGluay5zdGFydHNXaXRoKFxgXCR7YXRvYignZEhKdmFtRnVPaTh2Jyl9XGApOwoJCQkJCQlpZiAoaXNUcm9qYW4pIHV1aWRUeXBlID0gJ3Bhc3N3b3JkJzsKCQkJCQkJbGV0IHN1YkxpbmsgPSAnJzsKCQkJCQkJdHJ5IHsKCQkJCQkJCWNvbnN0IGlzVk1lc3MgPSBsaW5rLnN0YXJ0c1dpdGgoJ3ZtZXNzOi8vJyk7CgkJCQkJCQlpZiAoaXNWTWVzcyl7CgkJCQkJCQkJY29uc3Qgdm1lc3NMaW5rID0gbGluay5zcGxpdCgndm1lc3M6Ly8nKVsxXTsKCQkJCQkJCQljb25zdCB2bWVzc0pzb24gPSBKU09OLnBhcnNlKGF0b2Iodm1lc3NMaW5rKSk7CgkJCQkJCQkJCgkJCQkJCQkJY29uc3QgaG9zdCA9IHZtZXNzSnNvbi5ob3N0OwoJCQkJCQkJCWNvbnN0IHV1aWQgPSB2bWVzc0pzb24uaWQ7CgkJCQkJCQkJY29uc3QgcGF0aCA9IHZtZXNzSnNvbi5wYXRoIHx8ICcvJzsKCQkJCQkJCQljb25zdCBzbmkgPSB2bWVzc0pzb24uc25pIHx8IGhvc3Q7CgkJCQkJCQkJY29uc3QgdHlwZSA9IHZtZXNzSnNvbi50eXBlIHx8ICdub25lJzsKCQkJCQkJCQljb25zdCBhbHBuID0gdm1lc3NKc29uLmFscG4gfHwgJyc7CgkJCQkJCQkJY29uc3QgYWx0ZXJJZCA9IHZtZXNzSnNvbi5haWQgfHwgMDsKCQkJCQkJCQljb25zdCBzZWN1cml0eSA9IHZtZXNzSnNvbi5zY3kgfHwgJ2F1dG8nOwoJCQkJCQkJCWNvbnN0IGRvbWFpbiA9IHdpbmRvdy5sb2NhdGlvbi5ob3N0bmFtZTsKCQkJCQkJCQkKCQkJCQkJCQlzdWJMaW5rID0gXGBodHRwczovL1wke2RvbWFpbn0vc3ViP2hvc3Q9XCR7aG9zdH0mdXVpZD1cJHt1dWlkfSZwYXRoPVwke2VuY29kZVVSSUNvbXBvbmVudChwYXRoKX0mc25pPVwke3NuaX0mdHlwZT1cJHt0eXBlfSZhbHBuPVwke2VuY29kZVVSSUNvbXBvbmVudChhbHBuKX0mYWx0ZXJpZD1cJHthbHRlcklkfSZzZWN1cml0eT1cJHtzZWN1cml0eX1cYDsKCQkJCQkJCX0gZWxzZSB7CgkJCQkJCQkJY29uc3QgdXVpZCA9IGxpbmsuc3BsaXQoIi8vIilbMV0uc3BsaXQoIkAiKVswXTsKCQkJCQkJCQljb25zdCBzZWFyY2ggPSBsaW5rLnNwbGl0KCI/IilbMV0uc3BsaXQoIiMiKVswXTsKCQkJCQkJCQljb25zdCBkb21haW4gPSB3aW5kb3cubG9jYXRpb24uaG9zdG5hbWU7CgkJCQkJCQkJCgkJCQkJCQkJc3ViTGluayA9IFxgaHR0cHM6Ly9cJHtkb21haW59L3N1Yj9cJHt1dWlkVHlwZX09XCR7dXVpZH0mXCR7c2VhcmNofVxgOwoJCQkJCQkJfQoJCQkJCQkJZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3Jlc3VsdCcpLnZhbHVlID0gc3ViTGluazsKCQoJCQkJCQkJLy8g5pu05paw5LqM57u056CBCgkJCQkJCQljb25zdCBxcmNvZGVEaXYgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgncXJjb2RlJyk7CgkJCQkJCQlxcmNvZGVEaXYuaW5uZXJIVE1MID0gJyc7CgkJCQkJCQluZXcgUVJDb2RlKHFyY29kZURpdiwgewoJCQkJCQkJCXRleHQ6IHN1YkxpbmssCgkJCQkJCQkJd2lkdGg6IDIyMCwgLy8g6LCD5pW05a695bqmCgkJCQkJCQkJaGVpZ2h0OiAyMjAsIC8vIOiwg+aVtOmrmOW6pgoJCQkJCQkJCWNvbG9yRGFyazogIiM0YTYwZWEiLCAvLyDkuoznu7TnoIHpopzoibIKCQkJCQkJCQljb2xvckxpZ2h0OiAiI2ZmZmZmZiIsIC8vIOiDjOaZr+minOiJsgoJCQkJCQkJCWNvcnJlY3RMZXZlbDogUVJDb2RlLkNvcnJlY3RMZXZlbC5MLCAvLyDorr7nva7nuqDplJnnuqfliKsKCQkJCQkJCQlzY2FsZTogMSAvLyDosIPmlbTlg4/ntKDpopfnspLluqYKCQkJCQkJCX0pOwoJCQkJCQl9IGNhdGNoIChlcnJvcikgewoJCQkJCQkJYWxlcnQoJ+mTvuaOpeagvOW8j+mUmeivr++8jOivt+ajgOafpei+k+WFpScpOwoJCQkJCQl9CgkJCQkJfQoJCQkJPC9zY3JpcHQ+CgkJCTwvYm9keT4KCQkJPC9odG1sPgoJCQlgOwoKCXJldHVybiBuZXcgUmVzcG9uc2UoSFRNTCwgewoJCWhlYWRlcnM6IHsKCQkJImNvbnRlbnQtdHlwZSI6ICJ0ZXh0L2h0bWw7Y2hhcnNldD1VVEYtOCIsCgkJfSwKCX0pOwp9CnJldHVybiBfX0VYUE9SVF9fOwp9KSgpOw==";

function decodeBase64(b64) {
  return (typeof atob === "function")
    ? atob(b64)
    : Buffer.from(b64, "base64").toString("utf8");
}

function transformToIIFE(src) {
  // 1) 去掉 BOM
  if (src.charCodeAt(0) === 0xFEFF) src = src.slice(1);

  // 2) 去掉 shebang（以防万一）
  src = src.replace(/^#!.*/ , "");

  // 3) 如果已经是 IIFE（我们自己的标记：return __EXPORT__），直接返回
  if (/\breturn\s+__EXPORT__\s*;/.test(src)) {
    return src; // 已经转换过
  }

  // 4) 把第一处 export default 换成 const __EXPORT__ =
  //    只替换顶层第一处即可；你的源码只有一次默认导出
  const replaced = src.replace(/^\s*export\s+default\s+/m, "const __EXPORT__ = ");

  // 5) 包成 IIFE，并返回 __EXPORT__（供 new Function 调用时直接得到对象）
  //    注意这里不要额外加分号到表达式外面
  const wrapped =
    `(function(){\n"use strict";\n` +
    replaced +
    `\nreturn __EXPORT__;\n})();`;

  return wrapped;
}

function _lift(b64) {
  const raw = decodeBase64(b64);
  const code = transformToIIFE(raw); // 关键：把“含 export default 的源码”改成 IIFE
  // 让 code 作为一个表达式被 return，得到 { fetch(){…} } 对象
  const factory = new Function('"use strict"; return ' + code);
  return factory();
}

const app = _lift(_b64);

// Pages 的 _worker.js 需要默认导出 fetch
export default {
  async fetch(request, env, ctx) {
    return app.fetch(request, env, ctx);
  }
};

